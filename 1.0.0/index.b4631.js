window.__require=function e(t,n,i){function o(a,r){if(!n[a]){if(!t[a]){var l=a.split("/");if(l=l[l.length-1],!t[l]){var c="function"==typeof __require&&__require;if(!r&&c)return c(l,!0);if(s)return s(l,!0);throw new Error("Cannot find module '"+a+"'")}a=l}var p=n[a]={exports:{}};t[a][0].call(p.exports,function(e){return o(t[a][1][e]||e)},p,p.exports,e,t,n,i)}return n[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<i.length;a++)o(i[a]);return o}({Adaptive111006001:[function(e,t,n){"use strict";cc._RF.push(t,"6290bzMDGBJ9Y5twKF04vq7","Adaptive111006001");var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../GameEventName111006001"),r=cc._decorator,l=r.ccclass,c=r.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sc1=null,t.cs2=null,t.cz=null,t.logo=null,t}return o(t,e),t.prototype.onLoad=function(){game.EventManager.getInstance().raiseEvent(core.GameCoreConst.mess_openBanner,{parent:this.node.getChildByName("banner")}),game.EventManager.getInstance().addEventListener(a.EventName.EVENT_WIN_GAME,this.showChuanzhangAni,this),game.EventManager.getInstance().addEventListener(slot.GameEventNames.EVENT_WIN_MORE_THAN_BET,this.playAni,this),e.prototype.resize.call(this)},t.prototype.layoutLandscape=function(){this.sc1.active=!1,this.cs2.active=!1,this.cz.active=!1,this.logo.scale=1,this.logo.setPosition(0,445,0)},t.prototype.layoutPortrait=function(){this.sc1.active=!0,this.cs2.active=!0,this.cz.active=!0,this.cz.scale=2.2,this.logo.scale=1.2,this.logo.setPosition(0,460,0)},t.prototype.showChuanzhangAni=function(e,t){t==a.WinType.wild&&this.playWildAni()},t.prototype.playAni=function(){slot.SoundMger.instance.playEffect("winPrize")},t.prototype.playWildAni=function(){console.log("palyWildAni--------------")},t.prototype.playSound=function(){slot.SoundMger.instance.playEffect("Five_Prize"),console.log("\u64ad\u653e\u4e86\u4e94\u8fde\u97f3\u6548")},t.prototype.onDestroy=function(){game.EventManager.getInstance().removeEventListener(a.EventName.EVENT_WIN_GAME,this.showChuanzhangAni,this),game.EventManager.getInstance().removeEventListener(slot.GameEventNames.EVENT_WIN_MORE_THAN_BET,this.playAni,this)},s([c(cc.Node)],t.prototype,"sc1",void 0),s([c(cc.Node)],t.prototype,"cs2",void 0),s([c(cc.Node)],t.prototype,"cz",void 0),s([c(cc.Node)],t.prototype,"logo",void 0),s([l],t)}(slot.BaseView);n.default=p,cc._RF.pop()},{"../GameEventName111006001":"GameEventName111006001"}],Banner111006001:[function(e,t,n){"use strict";cc._RF.push(t,"c4766xa83dH/IBraAzxKMyM","Banner111006001");var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,l=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),s([r],t)}(slot.SlotBanner));n.default=l,cc._RF.pop()},{}],GameBg111006001:[function(e,t,n){"use strict";cc._RF.push(t,"597fcE2jUVAnZlW9rkQGMfA","GameBg111006001");var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,l=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.onLoad=function(){e.prototype.resize.call(this)},t.prototype.layoutPortrait=function(){},s([r],t)}(slot.BaseView));n.default=l,cc._RF.pop()},{}],GameEventName111006001:[function(e,t,n){"use strict";cc._RF.push(t,"ca65fGvksNAQrdlFI+FdLPW","GameEventName111006001"),Object.defineProperty(n,"__esModule",{value:!0}),n.WinType=n.EventName=void 0,function(e){e.EVENT_WIN_GAME="EVENT_WIN_GAME",e.EVENT_WIN_CORE="EVENT_WIN_CORE",e.EVENT_WILD_THROW_PINENUT="EVENT_WILDMOUSE_END_THROW_PINENUT",e.EVENT_MOUSE_END="EVENT_MOUSE_END",e.FU_SHU_RECONNECTION="FU_SHU_RECONNECTION",e.CHANGE_ELEMENT_VIEW_PT="CHANGE_ELEMENT_VIEW_PT",e.GAME_EVENT_SHOW_LINE="GAME_EVENT_SHOW_LINE"}(n.EventName||(n.EventName={})),function(e){e.SuperWin="SuperWin",e.MargeWin="MargeWin",e.BigWin="BigWin",e.Lose="Lose",e.win="win",e.fiveEven="fiveEven",e.wild="wild"}(n.WinType||(n.WinType={})),cc._RF.pop()},{}],GameLayer111006001:[function(e,t,n){"use strict";cc._RF.push(t,"03dfd0k2WFPcJVsFSNgFaM+","GameLayer111006001");var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../GameEventName111006001"),r=e("../main/WinAniManager111006001"),l=e("../NumAtlasLabel111006001"),c=e("../Utils111006001"),p=e("./JTPGScrollerGroup111006001"),h=e("./scrollerSkins/GameLogic111006001"),u=e("./scrollerSkins/JTChildManager111006001"),d=e("./scrollerSkins/JTLayerManager111006001"),m=e("./scrollerSkins/LineAnimationManager60"),f=cc._decorator,y=f.ccclass,_=f.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.roller=null,t.pineNut=null,t.ui_footer=null,t.mouseAni=null,t.wudingNode=null,t.elementMark=null,t.mouseAniState=0,t.wildCount=0,t.arrDefaultAni={1:"fx_level1_idle",2:"fx_level2_idle",3:"fx_level3_idle"},t.arrMouseAniIdle={1:{1:"fx_level1_idle2",2:"fx_level1_idle3",3:"fx_level1_idle4"},2:{1:"fx_level2_idle2",2:"fx_level2_idle3",3:"fx_level2_idle4"},3:{1:"fx_level3_idle2",2:"fx_level3_idle3",3:"fx_level3_idle4"}},t.probability_jfs=1,t.isTrigger=!1,t.isComplete=!1,t.isTrigger_jfs=!1,t.isComPlete_jfs=!1,t.cur_songziNum=0,t.nextState=0,t.curState=0,t.delayTime=2,t.isNormalPrize=!1,t.turnSpinIndex=0,t.isNormal=!1,t._arrRender=[],t.isRespin=!1,t.blockMask=null,t.middleWild=null,t.scatterTask=null,t.wildTask=null,t.scroller=null,t.mouseShakeHead=!1,t._spinAniViews=[],t.allLunboIdx=0,t.lineSpinArr=[],t.handler=null,t.testOffset=cc.v2(0,0),t}var n;return o(t,e),n=t,t.prototype.onLoad=function(){slot.SlotConfigManager.instance.registerJPTypes(3),e.prototype.onLoad.call(this),this.initUI(),0!=cc.sys.localStorage.getItem("wildKey")&&(this.wildCount=cc.sys.localStorage.getItem("wildKey")),0!=cc.sys.localStorage.getItem("jfsKey")&&(this.probability_jfs=cc.sys.localStorage.getItem("jfsKey")),n.instance=this,m.default.instance.init()},t.prototype._onLastGameInfoResp=function(e,t){if(t)if(console.log("_onLastGameInfoResp----------\x3e",e,t.state.state),1==t.state.state)console.log("\u6b63\u5e38\u6a21\u5f0f-------\x3e");else if(3==t.state.state){console.log("\u91cd\u8f6c\u6a21\u5f0f-------------"),this.isTrigger=!0;for(var n=0;n<3;n++){var i=this.scroller.items[n];n%2==0?(i.time=1500,2==n&&(i.time=3500)):i.time=2e3}this.fuShuReconnection()}},t.prototype.fuShuReconnection=function(){var e=this;console.log("\u798f\u9f20\u6a21\u5f0f\u91cd\u8fde\u6210\u529f-----------"),game.EventManager.getInstance().raiseEvent(slot.GameEventNames.EVENT_GAMECONTROL_ALL_BTN_CLICK,!1),slot.SlotMachineView.instance.scroller.isManualStopEnabled=!1,this.unschedule(this.callBackRandom),this.showFushu(),this.respin_utw.active=!0,this.decAction_narrow(),this.mouseAni.setPosition(cc.v2(0,510)),this.handleMiddleScroller(),this.ms_Ani.setAnimation(0,"top_idle3",!1),this.ms_Ani.setCompleteListener(function(){e.ms_Ani.setCompleteListener(null),e.ms_Ani.setAnimation(0,"top_excite_turnL",!1),e.ms_Ani.setCompleteListener(function(){e.ms_Ani.setCompleteListener(null),e.ms_Ani.setAnimation(0,"top_excite_lookL",!0)}),e.schedule(e.handleMouseTopAni,.2,cc.macro.REPEAT_FOREVER)}),this.scrollerDelay_respin(),this.changeScrollerBg()},t.prototype.callBackRandom=function(){var e=this,t=Math.ceil(3*Math.random()),n=this.getIdleName(t);this.ms_Ani.setAnimation(0,n,!0),this.ms_Ani.setCompleteListener(function(){e.ms_Ani.setCompleteListener(null);var t=e.getDefaultIdleName();e.ms_Ani.setAnimation(0,t,!0)})},t.prototype.initUI=function(){this.respin_utw=this.node.getChildByName("respin_utw"),this.top_dec=this.node.getChildByName("dec_top"),this.bottom_dec=this.node.getChildByName("dec_bottom"),this.scrollerLayer=this.node.getChildByName("scrollerLayer"),this.middleWild=this.scrollerLayer.getChildByName("wildNode");for(var e="skeleton/s_wild_atlas_symbols_"+(game.LanguageManager.getInstance().getCurLang()==game.LanguageType.ZH?"zh":"en")+"/s_wild_atlas_symbols",t=1;t<=3;t++){var n=this.middleWild.getChildByName("wildAni_"+t).getComponent(sp.Skeleton);slot.Property.setSpProperty(n,{json:e},slot.GData.bundleName)}this.scrollerEffect=this.scrollerLayer.getChildByName("scrollerEffect"),this.banner=this.scrollerLayer.getChildByName("banner"),this.bg_shout=this.banner.getChildByName("bg_shout"),this.scoreTouchLayer=this.banner.getChildByName("touchLayer"),this.shout=this.bg_shout.getChildByName("shout"),this.score=this.banner.getChildByName("score"),this.winLabel=this.score.getChildByName("win"),this.coin=this.score.getChildByName("coin"),this.scoreAni1=this.banner.getChildByName("score_Ani1"),this.scoreAni2=this.banner.getChildByName("score_Ani2"),this.circle_light=this.scrollerLayer.getChildByName("circle_light"),this.circle_light.active=!0,this.circle_dark=this.scrollerLayer.getChildByName("circle_dark"),this.circle_dark.active=!0,this.scrollerBg=this.scrollerLayer.getChildByName("scrollerBg"),this.blockMask=this.scrollerLayer.getChildByName("blockMask"),this.circle_win_light=this.scrollerLayer.getChildByName("circle_win_light"),this.circle_win_light.active=!0,this.circle_win_light.opacity=0,this.plants=this.node.getChildByName("plants"),this.fushuGuang=this.scrollerLayer.getChildByName("fushuGuang"),this.scoreTouchLayer.on(cc.Node.EventType.TOUCH_END,this.updateWinCoinImmediately,this),this.ui_footer.removeFromParent(),slot.MainView.instance.addNode(this.ui_footer,slot.LayerManage.scene+1),this.mouseAni.removeFromParent(),slot.MainView.instance.addNode(this.mouseAni,slot.LayerManage.brief)},t.prototype.onDestroy=function(){this.dispose(),this.unschedule(this.callBackRandom),this.scoreTouchLayer&&this.scoreTouchLayer.off(cc.Node.EventType.TOUCH_END,this.updateWinCoinImmediately,this),game.EventManager.getInstance().removeEventListener("SPINRESP",this.judgeTriggerDev,this),this.unschedule(this.raiseCallBack),this.unschedule(this.handleMouseTopAni),this.unscheduleAllCallbacks()},t.prototype.start=function(){},t.prototype.getRandomJfs=function(){return this.probability_jfs=Math.ceil(20*Math.random()),cc.sys.localStorage.setItem("jfsKey",this.probability_jfs),this.probability_jfs},t.prototype.onInit=function(){slot.SpinManager.instance.isFullLineAvailable=!1,this._initSlotMachineView()},t.prototype.onInitScroller=function(e){var t=this.scroller=e.scroller,n=slot.SlotConfigManager.instance.DataGame.getData(slot.SlotConfigManager.instance.gameID);t.setupFactory(new d.default,new u.default,new h.default),slot.JTDefaultItemRender.setPlayCoinIndex(2,7);var i=t.options(slot.JTScrollingPipeline,slot.JTScrollerGroup.USE_CONVERT_MROE_LIST,n.column,e.scrollingComplete);i.childOption(slot.JTCreateScrolling,slot.JTOptionType.OPTION_CREATE),i.childOption(slot.JTBeginScrolling,slot.JTOptionType.OPTION_BEGIN_RUNNING,e.beginScrolling),i.childOption(slot.JTRunScrolling,slot.JTOptionType.OPTION_RUNNING,e.onSpinPreStop),i.childOption(slot.JTOverScrolling,slot.JTOptionType.OPTION_OVER_RUNNING,e.scrollingProgress),t.setupDefaultItemList(this.getSourceList,slot.SlotConfigManager.instance.DataElement.getKeys(),!1),slot.JTDefaultItemRender.setPlayCoinIndex(1,7)},t.prototype._initSlotMachineView=function(){this.slotMachine.playRenderInterval=150,this.slotMachine.spaceX=35,this.slotMachine.spaceY=0,this.slotMachine.gridWidth=208,this.slotMachine.gridHeight=205,this.slotMachine.showLineInterval=2e3,this.slotMachine.showLineDuration=2e3,this.slotMachine.afterRender(this,this._rederAfter),this.slotMachine.onItemRender(this,this._onSpinSlotRender),this._registerSlotMachineAnimation()},t.prototype._rederAfter=function(){console.log("_rederAfter--------"),slot.SpinManager.instance.spinTouchEnable=!0,this.initMouseAni(),this.initRenderState(),this.schedule(this.callBackRandom,15);var e=Number(slot.SpinManager.instance.rollingResult.spinResult.spinCoin);e>0&&this.coinShow(e),this.handleSpinResult()},t.prototype.renderChangeCJ=function(){this._arrRender=[];for(var e=slot.SlotMachineView._instance.scroller.renders.length,t=0;t<e;t++){var n=slot.SlotMachineView._instance.scroller.renders[t];this._arrRender.push(n)}slot.SlotMachineView.instance.scroller},t.prototype.initMouseAni=function(){this.ms_Ani=this.mouseAni.getComponent(sp.Skeleton);var e=this.getDefaultIdleName();this.ms_Ani.setAnimation(0,e,!0),this.respin_utw.active=!1},t.prototype.getDefaultIdleName=function(){var e=1;switch(this.wildCount){case 10:e=1;break;case 20:e=2;break;case 30:e=3}return this.arrDefaultAni[e]},t.prototype.initRenderState=function(){for(var e=slot.SlotMachineView._instance.scroller.renders.length,t=0;t<e;t++){var n=slot.SlotMachineView._instance.scroller.renders[t],i=n.data;switch(n.updateSkinPt(),i){case 6:case 7:n.setAnimation(slot.JTGLoaderAssetType.Skeleton,"idle")}}},t.prototype.decAction_narrow=function(){this.blockMask.active=!0,cc.tween(this.top_dec).to(2,{scale:1.3},{easing:"sineIn"}).start(),cc.tween(this.scrollerLayer).to(2,{position:cc.v3(0,130)}).start(),cc.tween(this.scrollerLayer).to(2,{scale:.91},{easing:"sineIn"}).start(),cc.tween(this.bottom_dec).to(2,{position:cc.v3(0,-340)}).start(),cc.tween(this.bottom_dec).to(2,{scale:1},{easing:"sineIn"}).start();var e=cc.v2(325.5,-101);cc.tween(this.plants.children[0]).to(2,{position:cc.v3(-e.x,e.y,0)}).start(),cc.tween(this.plants.children[1]).to(2,{position:cc.v3(e.x,e.y,0)}).start()},t.prototype.decAction_enlarge=function(){var e=this;this.blockMask.active=!0,cc.tween(this.top_dec).to(2,{scale:1},{easing:"sineOut"}).start(),cc.tween(this.scrollerLayer).to(2,{position:cc.v2(0,265)}).start(),cc.tween(this.scrollerLayer).to(2,{scale:1},{easing:"sineOut"}).call(function(){e.blockMask.active=!1}).start(),cc.tween(this.bottom_dec).to(2,{position:cc.v3(0,-420)}).start(),cc.tween(this.bottom_dec).to(2,{scale:1.5},{easing:"sineOut"}).call(function(){}).start();var t=cc.v2(418,0);cc.tween(this.plants.children[0]).to(2,{position:cc.v3(-t.x,t.y,0)}).start(),cc.tween(this.plants.children[1]).to(2,{position:cc.v3(t.x,t.y,0)}).start()},t.prototype.decAction_Scale=function(){var e=this;cc.tween(this.scrollerLayer).to(1.7,{scale:.91},{easing:"sineIn"}).to(1.7,{scale:1},{easing:"sineOut"}).call(function(){game.EventManager.getInstance().raiseEvent(slot.GameEventNames.EVENT_GAMECONTROL_ALL_BTN_CLICK,!0),e.blockMask.active=!1}).start(),cc.tween(this.top_dec).to(1.7,{scale:1.3},{easing:"sineIn"}).to(1.7,{scale:1},{easing:"sineOut"}).start(),cc.tween(this.scrollerLayer).to(1.7,{position:cc.v2(0,130)}).to(1.7,{position:cc.v2(0,265)}).start(),cc.tween(this.bottom_dec).to(1.7,{position:cc.v3(0,-340)}).to(1.7,{position:cc.v3(0,-420)}).start(),cc.tween(this.bottom_dec).to(1.7,{scale:1},{easing:"sineIn"}).to(1.7,{scale:1.5},{easing:"sineOut"}).start();var t=cc.v2(325.5,-101),n=cc.v2(418,0);cc.tween(this.plants.children[0]).to(1.7,{position:cc.v3(-t.x,t.y,0)}).to(1.7,{position:cc.v3(-n.x,n.y,0)}).start(),cc.tween(this.plants.children[1]).to(1.7,{position:cc.v3(t.x,t.y,0)}).to(1.7,{position:cc.v3(n.x,n.y,0)}).start()},t.prototype.mouseAniStart_jia=function(){var e=this;this.ms_Ani.setAnimation(0,"fx_zoom_start",!1),this.ms_Ani.setCompleteListener(function(){e.ms_Ani.setCompleteListener(null),e.mouseAniIlde_jia()})},t.prototype.mouseAniIlde_jia=function(){this.ms_Ani.setAnimation(0,"fx_zoom_idle",!0)},t.prototype.mouseAniTrigger=function(){var e=this;this.ms_Ani.setCompleteListener(null),setTimeout(function(){slot.SoundMger.instance.playMusic("bgm_respin")},1);var t=["fx_zoom_start","fx_zoom_idle","fx_zoom_idle","fx_zoom_exit"],n=function(i,o){e.playMouseAnim(t[i],function(){i+1>=t.length?o&&o():n(i+1,o)})};n(0,function(){e.ms_Ani.setCompleteListener(null),e.mouseAniBegin()}),c.Utils111006001.instance.playEffect("Mouse_Sound")},t.prototype.mouseAniBegin=function(){var e=this;this.ms_Ani.setAnimation(0,"exit",!1),c.Utils111006001.instance.playEffect("Mode_Starts",!1),this.ms_Ani.setCompleteListener(function(){e.ms_Ani.setCompleteListener(null),e.respin_utw.active=!0,e.mouseAniTopEnter()})},t.prototype.mouseAniTopEnter=function(){var e=this;console.warn("[INFO] scroll scale --"),this.handleMiddleScroller(!0,function(){e.mouseAni.setPosition(cc.v2(0,510)),e.ms_Ani.setAnimation(0,"top_enter",!1),e.ms_Ani.setCompleteListener(function(){c.Utils111006001.instance.playEffect("Reach_The_Summit"),e.ms_Ani.setCompleteListener(null),e.mouseAniRotating()})})},t.prototype.mouseAniRotating=function(){var e=this;this.ms_Ani.setAnimation(0,"top_excite_start",!1),this.playMouseFaSheng(),this.ms_Ani.setCompleteListener(function(){e.ms_Ani.setCompleteListener(null),e.ms_Ani.setAnimation(0,"top_excite_lookL",!0),e.schedule(e.handleMouseTopAni,.2,cc.macro.REPEAT_FOREVER)})},t.prototype.playMouseAnim=function(e,t){var n=this;this.ms_Ani.setAnimation(0,e,!1),this.ms_Ani.setCompleteListener(function(){n.ms_Ani.setCompleteListener(null),t&&t()})},t.prototype.mouseTurnLeftRight=function(){var e=this;this.mouseShakeHead&&this.playMouseAnim("top_excite_lookL",function(){e.playMouseAnim("top_excite_turnR",function(){e.playMouseAnim("top_excite_lookR",function(){e.playMouseAnim("top_excite_turnL",e.mouseTurnLeftRight.bind(e))})})})},t.prototype.handleMouseTopAni=function(){var e=this;n.lastSpinIndex!=this.turnSpinIndex&&(n.lastSpinIndex=this.turnSpinIndex,0==this.turnSpinIndex&&"top_excite_lookL"!=this.ms_Ani.animation&&(this.playMouseFaSheng(),this.ms_Ani.setAnimation(0,"top_excite_turnL",!1),this.ms_Ani.setCompleteListener(function(){e.ms_Ani.setCompleteListener(null),e.ms_Ani.setAnimation(0,"top_excite_lookL",!0)})),2==this.turnSpinIndex&&(this.playMouseFaSheng(),this.ms_Ani.setAnimation(0,"top_excite_turnR",!1),this.ms_Ani.setCompleteListener(function(){e.ms_Ani.setCompleteListener(null),e.ms_Ani.setAnimation(0,"top_excite_lookR",!0)})))},t.prototype.playMouseFaSheng=function(){var e="Action_Above"+(Math.floor(30*Math.random())%16+1);c.Utils111006001.instance.playEffect(e)},t.prototype.mouseAniEnd_exit=function(){var e=this;this.mouseAni.setPosition(cc.v2(0,510)),this.ms_Ani.setAnimation(0,"top_exit",!1),c.Utils111006001.instance.playEffect("Top_To_Bottom",!1),this.ms_Ani.setCompleteListener(function(){e.ms_Ani.setCompleteListener(null);var t=e.respin_utw;cc.tween(t).to(.25,{opacity:127}).call(function(){e.mouseAniEnd()}).to(.25,{opacity:0}).call(function(){t.active=!1,t.opacity=255}).start()})},t.prototype.mouseAniReward=function(e){var t=this;void 0===e&&(e=!0),this.isRespin||(this.playMouseAnim(e?"medium_win":"small_win",function(){t.ms_Ani.setAnimation(0,t.getDefaultIdleName(),!0)}),this.playMouseWinSound())},t.prototype.playMouseWinSound=function(){var e="Hand_Ingot"+(Math.floor(10*Math.random())%3+1);c.Utils111006001.instance.playEffect(e)},t.prototype.mouseAniEnd=function(){var e=this;this.mouseAni.setPosition(cc.v2(0,-400)),this.decAction_enlarge(),this.ms_Ani.setAnimation(0,"enter",!1),this.unschedule(this.handleMouseTopAni),this.ms_Ani.setCompleteListener(function(){e.ms_Ani.setCompleteListener(null),slot.SlotMachineView.instance.scroller.isManualStopEnabled=!0,e.isComplete=!0,c.Utils111006001.instance.playEffect("Mouse_Teleport",!1),slot.SoundMger.instance.stopMusic("bgm_respin"),slot.SoundMger.instance.playMusic("Game_Back_Music",!0),game.EventManager.getInstance().raiseEvent(slot.GameEventNames.EVENT_GAMECONTROL_ALL_BTN_CLICK,!0);var t=e.getDefaultIdleName();e.ms_Ani.setAnimation(0,t,!0),e.schedule(e.callBackRandom,15)})},t.prototype._registerSlotMachineAnimation=function(){this.slotMachine.onContinuousNotWinAnimation(this,this._playContinuousNotWinAnimation),this.slotMachine.onNormalRewardsAnimation(this,this._playNormalRewardsAnimation),this.slotMachine.onFullLineAnimation(this,this._playFullLineAnimation),this.slotMachine.onGreatRewardsAnimation(this,this._playGreatRewardsAnimation),this.slotMachine.onMiddleRewardsAnimation(this,this._playMiddleRewardsAnimation),this.slotMachine.onSmallRewardsAnimation(this,this._playSmallRewardsAnimation),this.slotMachine.onSpinStart(this,this._onSpinStart),this.slotMachine.onSpinBegin(this,this._onSpinBegin),this.slotMachine.onSpinStop(this,this._onSpinStop),this.slotMachine.onSpinComplete(this,this._onSpinComplete)},t.prototype._onSpinStop=function(e){var t=this;if(console.warn("[INFO] stop: ",e),0==e&&(cc.tween(this.scrollerEffect).to(.1,{opacity:150}).to(.1,{opacity:0}).call(function(){t.scrollerEffect.active=!1}).start(),this.turnSpinIndex=2),2==e&&(this.turnSpinIndex=0),console.log("isTrigger----------",this.isTrigger,this.curState),1==this.isTrigger)if(console.log("\u798f\u9f20\u6a21\u5f0f-----------"),0==e)c.Utils111006001.instance.playEffect("Sound_effect",!1);else if(1==e)for(var n=slot.SlotMachineView.instance.scroller.items[e],i=0;i<n.renders.length;i++)n.renders[i];else 2==e&&c.Utils111006001.instance.playEffect("Sound_effect_of_the_third",!1);else if(1==this.curState){var o="Reel_Stop"+(e+1);c.Utils111006001.instance.playEffect(o),this.scrollerLayer.getChildByName("ui_particle").active=!1}else 0==e?c.Utils111006001.instance.playEffect("Sound_effect",!1):2==e&&c.Utils111006001.instance.playEffect("Sound_effect_of_the_third",!1)},t.prototype._onSpinComplete=function(){slot.SoundMger.instance.stopEffect("fs_reel_loop1"),slot.SoundMger.instance.stopEffect("Spin_Active_Loop"),this.scrollerLayer.getChildByName("ui_particle").active=!1;var e=slot.SlotMachineView._instance.scroller.renders.length;if(this.handleSpinResult(),slot.GData.curLanguage,1!=this.isTrigger)if(1==this.curState){this.saveWildCount(),1==this.isTrigger_jfs&&0==this.isComPlete_jfs&&(this.isComPlete_jfs=!0,this.isTrigger_jfs=!1,this.initMouseAni());for(var t=0;t<e;t++){var n=slot.SlotMachineView._instance.scroller.renders[t].data;1==this.judgeIsHaveWild(6)&&6==n&&this.isPlayFuAni(t)}}else if(3==this.curState)return void(this.nextState&&1==this.nextState&&(console.log("\u91cd\u8f6c\u7ed3\u675f-----------"),this.scroller.items[1].opacity=255,this.middleWild.active=!1,this.isShowMiddleGrid(!0)))},t.prototype.handleSpinResult=function(){var e=Number(slot.SpinManager.instance.rollingResult.allCost),t=Number(slot.SpinManager.instance.rollingResult.spinResult.spinCoin),n=this.mouseAniState;Math.floor(t/e)>=20?n=3:Math.floor(t/e)>=5&&Math.floor(t/e)<20?(n=2,this.isNormalPrize=!0):t>0&&Math.floor(t/e)<5?n=1:t<=0&&(n=0),this.mouseAniState=n,0==n&&(console.log("\u6ca1\u4e2d\u5956\u624d\u4f1a\u8c03-----------",n,t),this.renderChangeCJ()),n>=1?(this.circle_light.opacity=0,this.circle_dark.opacity=255):(this.circle_light.opacity=255,this.circle_dark.opacity=0)},t.prototype.isPlayFuAni=function(e){var t=slot.SlotMachineView._instance.scroller.renders[e];t.setAnimation(slot.JTGLoaderAssetType.Skeleton,"spawn",!1),t.updateSkinPt();var n=t.skinLoader.skeletonNode.getComponent(sp.Skeleton);n.setCompleteListener(function(){n.setCompleteListener(null),n.setAnimation(0,"idle",!0)})},t.prototype.isShowMiddleGrid=function(e){console.log("showmidel",e);for(var t=0;t<slot.SlotMachineView.instance.scroller.renders.length;t++){slot.SlotMachineView.instance.scroller.renders[t].active=!(!e||1!=e)||!(t>2&&t<6)}},t.prototype.handleMiddleScroller=function(e,t){void 0===e&&(e=!1),this.middleWild.active=!0,this.isShowMiddleGrid();var n=this.scroller.items[1];if(e){for(var i=function(e){var i=o.middleWild.getChildByName("wildAni_"+e).getComponent(sp.Skeleton);i.node.active=!1,o.scheduleOnce(function(){i.node.active=!0,i.setAnimation(0,"spawn",!1),i.setCompleteListener(function(){1==e&&(n.opacity=0),i.setAnimation(0,"idle_respin",!0)}),1==e&&t&&t();var o="The_blessing_mouse "+(4-e);c.Utils111006001.instance.playEffect(o)},.2*(3-e))},o=this,s=1;s<=3;s++)i(s);this.handleMiddleScrollerLight()}else n.opacity=0},t.prototype.handleMiddleScrollerLight=function(){this.fushuGuang.active=!0;var e=this.fushuGuang.getChildByName("mask").getChildByName("light"),t=this.fushuGuang.getChildByName("mask").getChildByName("shine"),n=this.fushuGuang.getChildByName("sprite");e.getComponent(cc.Animation).play(),cc.tween(t).set({scale:.2,opacity:130}).to(.5,{scale:2,opacity:255}).to(.5,{opacity:130}).set({opacity:0}).start(),cc.tween(n).set({opacity:0}).to(.5,{opacity:255}).delay(.5).to(.5,{opacity:0}).start()},t.prototype.judgeIsHaveWild=function(e){for(var t=!1,n=slot.SlotMachineView._instance.scroller.renders.length,i=0;i<n;i++)if(slot.SlotMachineView._instance.scroller.renders[i].data==e){t=!0;break}return t},t.prototype.getSpinPosByLineId=function(e){var t=[];switch(e){case 1:t=[1,4,7];break;case 2:t=[0,3,6];break;case 3:t=[2,5,8];break;case 4:t=[0,4,8];break;case 5:t=[2,4,6]}return t},t.prototype.getisPlayByIndex=function(e){var t=!1,n=slot.SpinManager.instance.rollingResult.spinResult;if(console.log("spinResult.lineResult.length-------",n.lineResult.length),0==n.lineResult.length)return!0;for(var i=n.lineResult,o=0;o<i.length;o++){var s=this.getSpinPosByLineId(i[o].lineId);console.log("pos------",s,e);for(var a=0;a<s.length;a++)e==s[a]&&(t=!0)}return t},t.prototype.handleWildPos=function(e,t){var n=this.mouseAni.getPosition(),i=slot.SlotMachineView._instance.scroller.renders[e];i.updateSkinPt(),i.setAnimation(slot.JTGLoaderAssetType.Skeleton,"spawn",!1);var o=i.skinLoader.skeletonNode.getComponent(sp.Skeleton);o.setCompleteListener(function(){o.setCompleteListener(null),o.setAnimation(0,"idle",!0)});var s=cc.instantiate(this.pineNut);this.node.addChild(s),this.cur_songziNum=this.cur_songziNum+1;var a=i.convertToWorldSpaceAR(cc.v2(0,0)),r=this.node.convertToNodeSpaceAR(a),l=cc.v2(r.x,r.y);s.setPosition(l);var p=Math.max(l.x,n.x),h=Math.max(l.y,n.y),u=Math.min(l.x,n.x),d=Math.min(l.y,n.y),m=cc.v2(0,0);m=r.x<n.x?Math.abs(l.x-n.x)<50?cc.v2(u-200,(h-d)/2+d):cc.v2(u-100,(h-d)/2+d):cc.v2(Math.floor((p-u)/2),(h-d)/2+d),this.playThrowPineNut(t,s,l,m,n),this.scroller.layerSortStopContainer.updateChangedChildsLayer([i],!0),c.Utils111006001.instance.playEffect("Versatile_symbol_pine_nut_sound_effect",!1)},t.prototype.getIdleName=function(e){var t=1;switch(this.wildCount){case 10:t=1;break;case 20:t=2;break;case 30:t=3}return this.arrMouseAniIdle[t][e]},t.prototype.playThrowPineNut=function(e,t,n,i,o){var s=this;cc.tween(t).bezierTo(.4,n,i,o).call(function(){s.handleMouseAni(e)}).delay(.2).call(function(){t.destroy()}).start()},t.prototype.handleMouseAni=function(e){var t=this,n=this.getDefaultIdleName();this.ms_Ani.setAnimation(0,"fx_wild",!1),this.ms_Ani.setCompleteListener(function(){t.ms_Ani.setCompleteListener(null),2==e?(t.ms_Ani.setAnimation(0,"medium_win",!1),c.Utils111006001.instance.playEffect("Jump_Up_Sound_Effect",!1),t.ms_Ani.setCompleteListener(function(){t.ms_Ani.setCompleteListener(null),t.ms_Ani.setAnimation(0,n,!0),t.schedule(function(){t.raiseCallBack()},1),t.cur_songziNum=0})):1==e?(t.ms_Ani.setAnimation(0,"small_win",!1),c.Utils111006001.instance.playEffect("Raise_Hand",!1),t.ms_Ani.setCompleteListener(function(){t.ms_Ani.setCompleteListener(null),t.ms_Ani.setAnimation(0,n,!0),t.cur_songziNum=0})):t.ms_Ani.setAnimation(0,n,!0)})},t.prototype.handleWildAni=function(e,t){if(this.isNormal){for(var n=!1,i=slot.SlotMachineView._instance.scroller.renders,o=0;o<i.length;o++){var s=i[o];7==s.data&&(this.handleWildPos(s.index,0),n=!0)}if(n){var a=1==i.length?"Sound_effect_of_a_pine_nut":2==i.length?"Sound_effect_of_two_pine_nuts":"Sound_effect_of_three_pine_nuts";this.scheduleOnce(function(){c.Utils111006001.instance.playEffect(a),t.run()},.4),c.Utils111006001.instance.playEffect("Wild_Pine_Down")}else t.run()}else t.run()},t.prototype.handleMouseEndAni=function(e,t){var n=this.isNormal;console.log("isNormal---------",n,this.isTrigger,this.curState,this.nextState,this.isComplete),n&&1==n?t.run():1==this.isTrigger?t.run():3==this.curState&&1==this.nextState?cc.tween(this).delay(2).call(function(){t.run()}).start():t.run()},t.prototype.raiseCallBack=function(){this.handler&&(this.handler.run(),this.handler=null)},t.prototype.saveWildCount=function(){for(var e=slot.SlotMachineView._instance.scroller.renders.length,t=0;t<e;t++)7==slot.SlotMachineView._instance.scroller.renders[t].data&&(this.wildCount=this.wildCount+1)},t.prototype.beforeScrollerStartRolling=function(){e.prototype.beforeScrollerStartRolling&&e.prototype.beforeScrollerStartRolling.call(this),console.log("\u70b9\u51fb\u65cb\u8f6c--------\x3e>>",this.isNormal),this.lineSpinArr=[],this.allLunboIdx=0,c.Utils111006001.instance.playEffect("Spin_Active_Loop",!0),1==this.score.active&&(this.score.active=!1,this.shout.active=!0,game.EventManager.getInstance().raiseEvent(slot.GameEventNames.EVENT_SLOT_BANNER_SETINFO,0))},t.prototype._onSpinStart=function(e){this.unschedule(this._clearSpinReelAni),this._clearSpinReelAni(),0==e&&(this.turnSpinIndex=0)},t.prototype._onSpinBegin=function(){var e=this;this.delayTime=1.5,this.wildCount>=30&&(this.wildCount=this.wildCount-30,cc.sys.localStorage.setItem("wildKey",this.wildCount)),cc.tween(this.scrollerEffect).to(.1,{opacity:150}).to(.1,{opacity:255}).call(function(){e.scrollerEffect.active=!0}).start(),this.scrollerLayer.getChildByName("ui_particle").active=!0;var t=this.bg_shout.getComponent(cc.Sprite);game.ResLoader.getInstance().loadRes("textures/bg/zhangshikuangtu",cc.SpriteAtlas,function(e,n){var i=n.getSpriteFrame("ib_bar_a");t.spriteFrame=i},slot.GData.bundleName),this.circle_light.opacity=255,this.circle_dark.opacity=0,this.circle_win_light.opacity=0;var n=this.scrollerBg.getComponent(cc.Sprite);game.ResLoader.getInstance().loadRes("textures/slotMachine/gunzhoubeijinger",cc.SpriteAtlas,function(e,t){var i=t.getSpriteFrame("ui_reel");n.spriteFrame=i},slot.GData.bundleName),this.isRespin&&(c.Utils111006001.instance.playEffect("fs_reel_loop1",!0,!1,null,null,50),c.Utils111006001.instance.playEffect("fs_reel_loop3",!1))},t.prototype.onRsultResp=function(){this.isNormal||(slot.SlotMachineView.instance.scroller.isManualStopEnabled=!1)},t.prototype.judgeTriggerDev=function(e,t){if(t){console.log("result-----------",t);var n=t.updateList[0].value.handleState.gameNotWinReturnSpin.data.isTrigger;if(this.isTrigger=n,this.curState=t.state,this.lineSpinArr=this.getLineSpinArr(t.spinResult.lineResult),t.nextState?this.nextState=t.nextState.state:this.nextState=null,1==n){console.log("\u798f\u9f20\u6a21\u5f0f-----------"),this.isNormal=!1;var i="False_rat"+(Math.floor(10*Math.random())%6+1);c.Utils111006001.instance.playEffect("fs_reel_loop1",!0,!1,null,null,50),c.Utils111006001.instance.playEffect(i),c.Utils111006001.instance.playEffect("Mode_Trigger"),c.Utils111006001.instance.playEffect("Fortune_Rat_Telescopic"),game.EventManager.getInstance().raiseEvent(slot.GameEventNames.EVENT_GAMECONTROL_ALL_BTN_CLICK,!1),this.unschedule(this.callBackRandom),this.showFushu(!0),this.mouseAniTrigger(),this.decAction_narrow(),this.scrollerDelay(),this.blockMask.active=!0}else 1==this.curState?(console.log("\u6b63\u5e38\u6a21\u5f0f----------------"),this.isNormal=!0,this.middleWild.active=!1,console.log("hide wild"),this.isShowMiddleGrid(!0),this.scroller.items[1].opacity=255,1==this.getRandomJfs()&&(console.log("\u5047\u798f\u9f20\u6a21\u5f0f----------------"),i="False_rat"+(Math.floor(10*Math.random())%6+1),c.Utils111006001.instance.playEffect("False_Rat",!1),c.Utils111006001.instance.playEffect(i),c.Utils111006001.instance.playEffect("Mode_Trigger"),c.Utils111006001.instance.playEffect("Fortune_Rat_Telescopic"),game.EventManager.getInstance().raiseEvent(slot.GameEventNames.EVENT_GAMECONTROL_ALL_BTN_CLICK,!1),this.decAction_Scale(),this.mouseAniStart_jia(),this.scrollerDelay_jia(),this.isTrigger_jfs=!0,this.isComPlete_jfs=!1,this.blockMask.active=!0)):3==this.curState&&(console.log("\u91cd\u8f6c\u6a21\u5f0f-------------------"),this.isNormal=!1,this.scrollerDelay_respin(),this.changeScrollerBg())}},t.prototype.getLineSpinArr=function(e){var t=[];if(e&&0==e.length)return t;if(e)for(var n=0;n<e.length;n++)for(var i=e[n].winPos,o=0;o<i.length;o++)t.push(i[o]);return(t=Array.from(new Set(t))).sort(function(e,t){return e-t}),t},t.prototype.changeScrollerBg=function(){var e=this.scrollerBg.getComponent(cc.Sprite);game.ResLoader.getInstance().loadRes("textures/slotMachine/gunzhoubeijinger",cc.SpriteAtlas,function(t,n){var i=n.getSpriteFrame("f_reel");e.spriteFrame=i},slot.GData.bundleName)},t.prototype.scrollerDelay_jia=function(){var e=this.slotMachine.scroller.items[0],t=this.slotMachine.scroller.items[1],n=this.slotMachine.scroller.items[2];e.time=3e3,t.time=3100,n.time=3300},t.prototype.scrollerDelay=function(){var e=this.slotMachine.scroller.items[0],t=this.slotMachine.scroller.items[1],n=this.slotMachine.scroller.items[2];e.delay=e.delay+800,e.time=e.time+4800,t.delay=t.delay+1100,t.time=t.time+4800,n.delay=n.delay+1400,n.time=n.time+6e3},t.prototype.scrollerDelay_respin=function(){var e=this.slotMachine.scroller.items[0],t=this.slotMachine.scroller.items[1],n=this.slotMachine.scroller.items[2];e.delay=e.delay+800,e.time=e.time+1e3,t.delay=t.delay+800,t.time=t.time+1e3,n.delay=n.delay+1400,n.time=n.time+2e3},t.prototype._clearSpinReelAni=function(){},t.prototype._playContinuousNotWinAnimation=function(e,t){t.run()},t.prototype._playNormalRewardsAnimation=function(e,t){var n=this,i=slot.Handler.create(this,function(){var i=n.bg_shout.getComponent(cc.Sprite);n.mouseAniState<2&&(game.ResLoader.getInstance().loadRes("textures/bg/zhangshikuangtu",cc.SpriteAtlas,function(e,t){var n=t.getSpriteFrame("ib_bar_a");i.spriteFrame=n},slot.GData.bundleName),n.mouseAniState,n.coinShow(e));var o="Win"+(Math.random()>.5?2:1);c.Utils111006001.instance.playEffect(o),t.run()});this.showWinAniView(slot.WinAniType.Normal,e,i,!0,!0),game.EventManager.getInstance().raiseEvent(a.EventName.EVENT_WIN_GAME,a.WinType.win)},t.prototype.onKeyDown=function(e){var t=this;if(slot.SpinManager.instance.rollingResult){var n=Number(slot.SpinManager.instance.rollingResult.spinResult.spinCoin);e.keyCode==cc.macro.KEY.space&&(this.unschedule(this.updateWinCoin),n>0&&this.coinShow(n),this.scheduleOnce(function(){t.raiseCallBack()},1))}},t.prototype.handleCoinAni=function(e,t){var n=this,i=0;if(1==this.isNormalPrize)if(2==this.mouseAniState){this.handler=t,this.curMoney=0,this.deltaMoney=.1*slot.SpinManager.instance.betCost,this.acceleration=0,this.isLabelTween=!0,c.Utils111006001.instance.playEffect("Win_Number_Scrolling",!1);var o=this.bg_shout.getComponent(cc.Sprite);game.ResLoader.getInstance().loadRes("textures/bg/zhangshikuantu",cc.SpriteAtlas,function(e,t){var i=t.getSpriteFrame("ib_bar_b");cc.tween(n.bg_shout).delay(.4).call(function(){o.spriteFrame=i}).start()},slot.GData.bundleName),this.scoreAni2.getComponent(cc.Animation).play(),this.scoreTouchLayer.active=!0,this.schedule(this.updateWinCoin,0,cc.macro.REPEAT_FOREVER),cc.systemEvent.on("keyup",this.onKeyDown,this),i=Number(slot.SpinManager.instance.rollingResult.spinResult.spinCoin)/this.deltaMoney/60}else t.run();else t.run();1!=this.mouseAniState&&2!=this.mouseAniState||this.scheduleOnce(function(){n.mouseAniReward(2==n.mouseAniState)},.6);var s=slot.SpinManager.instance.rollingResult.spinResult.lineResult;this.mouseAniState>=1&&s.length>1&&this.scheduleOnce(function(){n.circle_win_light.opacity=255},i)},t.prototype.updateWinCoin=function(){var e=this,t=0;if(slot.SpinManager.instance.rollingResult&&slot.SpinManager.instance.rollingResult.spinResult&&null!=slot.SpinManager.instance.rollingResult.spinResult.spinCoin&&(t=Number(slot.SpinManager.instance.rollingResult.spinResult.spinCoin)),this.isLabelTween){this.deltaMoney=this.deltaMoney*(1+this.acceleration);var n=this.curMoney+this.deltaMoney;n>=t&&(n=t),n>=t?(this.scoreAni2.getComponent(cc.Animation).play(),n=t,this.isLabelTween=!1,slot.SoundMger.instance.stopEffect("Win_Number_Scrolling"),c.Utils111006001.instance.playEffect("Number_Scrolling_Win"),this.unschedule(this.updateWinCoin),this.isNormalPrize=!1,this.schedule(function(){e.raiseCallBack()},1),this.curMoney=n,this.coinShow(this.curMoney,1),this.scoreTouchLayer.active=!1):(this.curMoney=n,this.coinShow(this.curMoney,2))}},t.prototype.updateWinCoinImmediately=function(){var e=this,t=0;if(slot.SpinManager.instance.rollingResult&&slot.SpinManager.instance.rollingResult.spinResult&&null!=slot.SpinManager.instance.rollingResult.spinResult.spinCoin&&(t=Number(slot.SpinManager.instance.rollingResult.spinResult.spinCoin)),this.isLabelTween){this.scoreAni2.getComponent(cc.Animation).play();var n=t;this.isLabelTween=!1,slot.SoundMger.instance.stopEffect("Win_Number_Scrolling"),c.Utils111006001.instance.playEffect("Number_Scrolling_Win"),this.unschedule(this.updateWinCoin),this.isNormalPrize=!1,this.schedule(function(){e.raiseCallBack()},1),this.curMoney=n,this.coinShow(this.curMoney,1),this.scoreTouchLayer.active=!1}},t.prototype.coinShow=function(e,t){this.score.active=!0,game.EventManager.getInstance().raiseEvent(slot.GameEventNames.EVENT_SLOT_BANNER_STOP),t?1==t?(cc.tween(this.score).to(.1,{scale:1.5}).to(.1,{scale:1}).start(),this.winLabel.active=!0):2==t?this.winLabel.active=!1:3==t&&(this.winLabel.active=!0):this.winLabel.active=!0,this.coin.getComponent(l.default).string=slot.SlotUtils.formatNumber(e)},t.prototype.showFushu=function(e){void 0===e&&(e=!1),this.wildCount=0,cc.sys.localStorage.setItem("wildKey",this.wildCount),this.score.active=!1,this.shout.active=!0,setTimeout(function(){game.EventManager.getInstance().raiseEvent(slot.GameEventNames.EVENT_SLOT_BANNER_SETINFO,1)},e?2e3:500)},t.prototype.showShout=function(){this.shout.active=!0,game.EventManager.getInstance().raiseEvent(slot.GameEventNames.EVENT_SLOT_BANNER_SETINFO,0),this.score.active=!1},t.prototype.updateLoginWin=function(e,t){var n=this;if(console.log("updateLoginWin-------------",t,slot.SpinManager.instance.betCost),t>0){var i=slot.SpinManager.instance.totalWin||t,o=slot.SlotUtils.getWinType(i,slot.SpinManager.instance.betCost)>=slot.WinType.Small;game.EventManager.getInstance().raiseEvent(slot.GameEventNames.EVENT_FORCE_UPDATE_WINSCORE,i),this.score.active=!0,o||2==this.mouseAniState?cc.tween(this.score).to(.1,{scale:1.1}).to(.1,{scale:1}).start():(this.scoreAni1.active=!0,this.scoreAni1.getComponent(cc.Animation).play(),cc.tween(this.bg_shout).to(.1,{scale:1.15}).to(.1,{scale:1}).start());var s=this.bg_shout.getComponent(cc.Sprite);i>=5*slot.SpinManager.instance.betCost&&i<20*slot.SpinManager.instance.betCost?game.ResLoader.getInstance().loadRes("textures/bg/zhangshikuantu",cc.SpriteAtlas,function(e,t){var i=t.getSpriteFrame("ib_bar_b");s.spriteFrame=i,cc.tween(n.bg_shout).delay(.3).call(function(){n.scoreAni1.getComponent(cc.Animation).stop(),n.scoreAni1.active=!1}).start()},slot.GData.bundleName):(game.ResLoader.getInstance().loadRes("textures/bg/zhangshikuangtu",cc.SpriteAtlas,function(e,t){var n=t.getSpriteFrame("ib_bar_a");s.spriteFrame=n},slot.GData.bundleName),cc.tween(this.bg_shout).delay(.05).call(function(){n.coinShow(i,1)}).start()),this.winLabel.active=!0,game.EventManager.getInstance().raiseEvent(slot.GameEventNames.EVENT_SLOT_BANNER_STOP),c.Utils111006001.instance.playEffect("Display_Frame_Light_Effect",!1)}else console.log("\u65ad\u7ebf\u4e4b\u540e\u6ca1\u4e2d\u5956-----"),this.renderChangeCJ(),this.showShout(),game.EventManager.getInstance().raiseEvent(slot.GameEventNames.EVENT_SLOT_BANNER_START)},t.prototype.refreshRoom=function(){},t.prototype.onSetElementView=function(e,t,n,i,o,s){if("EVENT_ELEMENT_PAY_ID_SHOW"==e){this.elementMark.active=!0;var a=this.getElementViewOffset(t,n);s.x+=a.x,s.y+=a.y,s.getChildByName("imageSk").x=o?-90:90,this.updateCircleLight(this.node),this.circle_light.zIndex=s.zIndex,this.circle_light.setSiblingIndex(-1)}else this.elementMark.active=!1,this.updateCircleLight(this.scrollerLayer)},t.prototype.getElementViewOffset=function(e,t){var n=Math.floor(t/3),i=[cc.v2(-15,0),cc.v2(-13,0),cc.v2(15,0)],o=[cc.v2(0,0),cc.v2(0,3),cc.v2(0,5),cc.v2(2,5),cc.v2(2,5),cc.v2(2,5),cc.v2(0,-5)];return i[n].add(o[e-1])},t.prototype.changeOffSet=function(e,t){this.testOffset=t},t.prototype.updateCircleLight=function(e){var t=this.circle_light,n=t.parent.convertToWorldSpaceAR(t.getPosition()),i=e.convertToNodeSpaceAR(n);t.parent=e,t.setPosition(i)},t.prototype._playFullLineAnimation=function(e,t){game.EventManager.getInstance().raiseEvent(a.EventName.EVENT_WIN_GAME,a.WinType.fiveEven),t.run()},t.prototype._playGreatRewardsAnimation=function(e,t){var n=this,i=slot.Handler.create(this,function(){n.coinShow(e),t.run()});this.showWinAniView(slot.WinAniType.Great,e,i)},t.prototype._playMiddleRewardsAnimation=function(e,t){var n=this,i=slot.Handler.create(this,function(){n.coinShow(e),t.run()});this.showWinAniView(slot.WinAniType.Middle,e,i)},t.prototype._playSmallRewardsAnimation=function(e,t){var n=this,i=slot.Handler.create(this,function(){n.coinShow(e),t.run()});this.showWinAniView(slot.WinAniType.Small,e,i)},t.prototype.showWinAniView=function(t,n,i,o,s,a,r){var l=this;this.updateCircleLight(this.node.parent),e.prototype.showWinAniView.call(this,t,n,slot.Handler.create(this,function(){i&&i.run(),l.updateCircleLight(l.scrollerLayer)}),o,s,a,r)},t.prototype.playWinAni=function(e,t,n){r.default.instance.playWinAni(e,t,n)},t.prototype.isMouseEnd=function(){this.mouseAni.getPosition().y>=400&&this.mouseAniEnd_exit()},t.prototype._onSpinSlotRender=function(){},t.prototype.addEventListener=function(){e.prototype.addEventListener.call(this),game.EventManager.getInstance().addEventListener(a.EventName.EVENT_MOUSE_END,this.handleMouseEndAni,this),game.EventManager.getInstance().addEventListener(a.EventName.EVENT_WILD_THROW_PINENUT,this.handleWildAni,this),game.EventManager.getInstance().addEventListener(a.EventName.EVENT_WIN_CORE,this.handleCoinAni,this),game.EventManager.getInstance().addEventListener(slot.GameEventNames.EVENT_CLICK_ELEMENT_VIEW,this._playSound,this),game.EventManager.getInstance().addEventListener(slot.GameEventNames.EVENT_UPDATE_WIN_ANI_END,this.isMouseEnd,this),game.EventManager.getInstance().addEventListener(slot.GameEventNames.EVENT_UPDATE_WINSCORE,this.updateLoginWin,this),game.EventManager.getInstance().addEventListener(slot.NetSlotConst.SPINRESP,this.judgeTriggerDev,this),game.EventManager.getInstance().addEventListener(slot.NetSlotConst.RESTORERESP,this._onLastGameInfoResp,this),game.EventManager.getInstance().addEventListener(slot.GameEventNames.EVENT_ELEMENT_PAY_ID_SHOW,this.onSetElementView,this),game.EventManager.getInstance().addEventListener(slot.GameEventNames.EVENT_ELEMENT_PAY_ID_HIDE,this.onSetElementView,this),game.EventManager.getInstance().addEventListener(slot.GameEventNames.EVENT_BIGWIN_TEXT_SHOW,this.showBigWinTxt,this),game.EventManager.getInstance().addEventListener(slot.GameEventNames.EVENT_BIGWIN_TEXT_HIDE,this.hideBigWinTxt,this),game.EventManager.getInstance().addEventListener(slot.GameEventNames.EVENT_STOP_SLOT_MACHINE_IMMEDIATELY,this.onQuickStopRoller,this),game.EventManager.getInstance().addEventListener(a.EventName.CHANGE_ELEMENT_VIEW_PT,this.changeOffSet,this),game.EventManager.getInstance().addEventListener(a.EventName.GAME_EVENT_SHOW_LINE,this._onEventShowLine,this),game.EventManager.getInstance().addEventListener(slot.GameEventNames.EVENT_ROLL_RESULT_RESP,this.onRsultResp,this)},t.prototype._playSound=function(){c.Utils111006001.instance.playEffect("Click_Element_View",!1)},t.prototype.removeEventListener=function(){e.prototype.removeEventListener.call(this),game.EventManager.getInstance().removeEventListener(a.EventName.EVENT_MOUSE_END,this.handleMouseEndAni,this),game.EventManager.getInstance().removeEventListener(a.EventName.EVENT_WILD_THROW_PINENUT,this.handleWildAni,this),game.EventManager.getInstance().removeEventListener(a.EventName.EVENT_WIN_CORE,this.handleCoinAni,this),game.EventManager.getInstance().removeEventListener(slot.GameEventNames.EVENT_CLICK_ELEMENT_VIEW,this._playSound,this),game.EventManager.getInstance().removeEventListener(slot.GameEventNames.EVENT_UPDATE_WIN_ANI_END,this.isMouseEnd,this),game.EventManager.getInstance().removeEventListener(slot.GameEventNames.EVENT_UPDATE_WINSCORE,this.updateLoginWin,this),game.EventManager.getInstance().removeEventListener(slot.NetSlotConst.SPINRESP,this.judgeTriggerDev,this),game.EventManager.getInstance().removeEventListener(slot.NetSlotConst.RESTORERESP,this._onLastGameInfoResp,this),game.EventManager.getInstance().removeEventListener(slot.GameEventNames.EVENT_ELEMENT_PAY_ID_SHOW,this.onSetElementView,this),game.EventManager.getInstance().removeEventListener(slot.GameEventNames.EVENT_ELEMENT_PAY_ID_HIDE,this.onSetElementView,this),game.EventManager.getInstance().removeEventListener(slot.GameEventNames.EVENT_BIGWIN_TEXT_SHOW,this.showBigWinTxt,this),game.EventManager.getInstance().removeEventListener(slot.GameEventNames.EVENT_BIGWIN_TEXT_HIDE,this.hideBigWinTxt,this),game.EventManager.getInstance().removeEventListener(slot.GameEventNames.EVENT_STOP_SLOT_MACHINE_IMMEDIATELY,this.onQuickStopRoller,this),game.EventManager.getInstance().removeEventListener(a.EventName.CHANGE_ELEMENT_VIEW_PT,this.changeOffSet,this),game.EventManager.getInstance().removeEventListener(a.EventName.GAME_EVENT_SHOW_LINE,this._onEventShowLine,this),game.EventManager.getInstance().removeEventListener(slot.GameEventNames.EVENT_ROLL_RESULT_RESP,this.onRsultResp,this)},t.prototype._onEventShowLine=function(e,t,n){var i=this.circle_win_light.getChildByName("circleleft"),o=this.circle_win_light.getChildByName("circleright");if(t&&(this.circle_light.opacity=0),this.circle_win_light.opacity=t?255:0,t)for(s=0;s<i.children.length;s++)a=i.children[s],r=o.children[s],s==n-1&&(a.opacity=255,r.opacity=255);else for(var s=0;s<i.children.length;s++){var a=i.children[s],r=o.children[s];a.opacity=0,r.opacity=0}},t.prototype.onInitFreeGame=function(e,t){switch(console.log("oniniffreegame",e),e.type){case slot.OperationState.Free:break;case slot.OperationState.ReSpin:this.isRespin=!0,this.fuShuReconnection()}t.runWith(!0)},t.prototype.onFreeGameTriggered=function(e,t){switch(console.log("onFreeGameTriggered",e),e.type){case slot.OperationState.Free:break;case slot.OperationState.ReSpin:this.isRespin=!0}t.runWith(!0)},t.prototype.addFreeSpinsAni=function(e,t,n){n.run()},t.prototype.onFreeGameInfoUpdated=function(e){switch(console.log("onFreeGameInfoUpdated",e),e.type){case slot.OperationState.Free:case slot.OperationState.ReSpin:}},t.prototype.onFreeGameOver=function(e,t){switch(console.log("onFreeGameOver",e),e.type){case slot.OperationState.Free:break;case slot.OperationState.ReSpin:this.isRespin=!1;var n=Number(slot.SpinManager.instance.rollingResult.allCost),i=Number(slot.SpinManager.instance.rollingResult.spinResult.spinCoin);Math.floor(i/n)<=19&&(console.log("-----\u8001\u9f20\u52a8\u4f5c------"),this.mouseAniEnd_exit())}t.runWith(!0)},t.prototype.onFreeGameTriggerAgain=function(e){switch(console.log("onFreeGameTriggerAgain",e),e.type){case slot.OperationState.Free:case slot.OperationState.ReSpin:}},t.prototype.onFreeGameTimesUpdated=function(){},t.prototype.showBigWinTxt=function(e,t){var n=t;cc.tween(n).set({active:!0,scale:.01,opacity:0}).delay(.3).set({opacity:255}).to(.3,{scale:1.1}).delay(.1).to(.1,{scale:.8}).start()},t.prototype.hideBigWinTxt=function(e,t){var n=t;cc.tween(n).to(.3,{scale:.01}).call(function(){n.active=!1}).start()},t.prototype.onQuickStopRoller=function(){console.log("onQuickStopRoller------\x3e>>"),slot.SoundMger.instance.stopEffect("Spin_Active_Loop"),c.Utils111006001.instance.playEffect("Reel_Stop_Quick")},t.prototype.createScoller=function(){return new p.default},t.lastSpinIndex=null,s([_(cc.Node)],t.prototype,"roller",void 0),s([_({type:cc.Prefab,tooltip:"\u677e\u5b50\u9884\u5236\u8d44\u6e90"})],t.prototype,"pineNut",void 0),s([_({type:cc.Node,tooltip:"\u5e95\u90e8\u83dc\u5355\u680f\u80cc\u666f"})],t.prototype,"ui_footer",void 0),s([_({type:cc.Node,tooltip:"\u8001\u9f20\u52a8\u753b"})],t.prototype,"mouseAni",void 0),s([_(cc.Node)],t.prototype,"wudingNode",void 0),s([_(cc.Node)],t.prototype,"elementMark",void 0),n=s([y],t)}(slot.AbstractMainView);n.default=g,cc._RF.pop()},{"../GameEventName111006001":"GameEventName111006001","../NumAtlasLabel111006001":"NumAtlasLabel111006001","../Utils111006001":"Utils111006001","../main/WinAniManager111006001":"WinAniManager111006001","./JTPGScrollerGroup111006001":"JTPGScrollerGroup111006001","./scrollerSkins/GameLogic111006001":"GameLogic111006001","./scrollerSkins/JTChildManager111006001":"JTChildManager111006001","./scrollerSkins/JTLayerManager111006001":"JTLayerManager111006001","./scrollerSkins/LineAnimationManager60":"LineAnimationManager60"}],GameLogic111006001:[function(e,t,n){"use strict";cc._RF.push(t,"96d5dbplx9C1qrlPvKX8HPy","GameLogic111006001");var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./JTContrlAni111006001"),r=e("./JTContrlMouseAni111006001"),l=e("./JTContrlWildAni111006001"),c=cc._decorator,p=c.ccclass,h=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.adjustFlowOptions=function(){this.childOption(a.default,slot.JTTaskPriority.JTELIMANATE_SCORE_TASk-1),this.childOption(l.default,slot.JTTaskPriority.JTCONVERT_PLAYLINES-1),this.childOption(r.default,slot.JTTaskPriority.JTFREEGAME_OVER_TASK+1)},s([p],t)}(slot.JTLogicFactroy));n.default=h,cc._RF.pop()},{"./JTContrlAni111006001":"JTContrlAni111006001","./JTContrlMouseAni111006001":"JTContrlMouseAni111006001","./JTContrlWildAni111006001":"JTContrlWildAni111006001"}],JTChildManager111006001:[function(e,t,n){"use strict";cc._RF.push(t,"5719b+lJVtDfYSZeMtE0kix","JTChildManager111006001");var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var s=e("../SpinSlotViewExtend111006001"),a=e("./JTSkinnableRuntimeLineAnimationRender60"),r=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.registerClassAlias=function(){return this.registerClass(slot.JTChildFactory.SCROLLER_TYPE,slot.JTScroller),this.registerClass(slot.JTChildFactory.ITEMRENDER_TYPE,s.default),this.registerClass(slot.JTChildFactory.GIRD_TYPE,slot.JTSkinnableGridRender),this.registerClass(slot.JTChildFactory.SCATTER_TYPE,slot.JTScatterGridRender),this.registerClass(slot.JTChildFactory.LINE_TYPE,a.default),this},t.prototype.changedLine=function(t,n){e.prototype.changedLine.call(this,t,n)},t}(slot.JTChildFactory);n.default=r,cc._RF.pop()},{"../SpinSlotViewExtend111006001":"SpinSlotViewExtend111006001","./JTSkinnableRuntimeLineAnimationRender60":"JTSkinnableRuntimeLineAnimationRender60"}],JTContrlAni111006001:[function(e,t,n){"use strict";cc._RF.push(t,"f02edfKxN9Ij4UMjS+Byryv","JTContrlAni111006001");var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../GameEventName111006001"),r=cc._decorator,l=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.runningTask=function(){e.prototype.runningTask.call(this),game.EventManager.getInstance().raiseEvent(a.EventName.EVENT_WIN_CORE,slot.Handler.create(this,this.complete))},s([l],t)}(slot.JTParseTask));n.default=c,cc._RF.pop()},{"../../GameEventName111006001":"GameEventName111006001"}],JTContrlMouseAni111006001:[function(e,t,n){"use strict";cc._RF.push(t,"73b32hd1SxExpZOlqsmkx9P","JTContrlMouseAni111006001");var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../GameEventName111006001"),r=cc._decorator,l=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.runningTask=function(){e.prototype.runningTask.call(this),game.EventManager.getInstance().raiseEvent(a.EventName.EVENT_MOUSE_END,slot.Handler.create(this,this.complete))},s([l],t)}(slot.JTParseTask));n.default=c,cc._RF.pop()},{"../../GameEventName111006001":"GameEventName111006001"}],JTContrlWildAni111006001:[function(e,t,n){"use strict";cc._RF.push(t,"ce087QiN/1En65BgnBThdGQ","JTContrlWildAni111006001");var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../GameEventName111006001"),r=cc._decorator,l=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.runningTask=function(){e.prototype.runningTask.call(this),game.EventManager.getInstance().raiseEvent(a.EventName.EVENT_WILD_THROW_PINENUT,slot.Handler.create(this,this.complete))},s([l],t)}(slot.JTParseTask));n.default=c,cc._RF.pop()},{"../../GameEventName111006001":"GameEventName111006001"}],JTLayerManager111006001:[function(e,t,n){"use strict";cc._RF.push(t,"aa69cmSY1FEmpzsFRlItGKh","JTLayerManager111006001");var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var s=e("../GameLayer111006001"),a=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.initialize=function(e){this.addChildNode(slot.JTLayerFactory.EFFECT_BELOW_CONTAINER,e),this.addChildNode(slot.JTLayerFactory.SKIN_LOADER_CONTAINER,e);var n=this.addChildNode(slot.JTLayerFactory.SCROLLER_MASK_CONTAINER,e);this.addChildNode(slot.JTLayerFactory.SCROLLER_CONTAINER,n);var i=this.addChildNode(t.WUDING_CONTAINER,e),o=s.default.instance.wudingNode,a=o.parent.convertToWorldSpaceAR(cc.v2(o.x,o.y)),r=i.convertToNodeSpaceAR(a);o.removeFromParent(),o.setPosition(r),i.addChild(o),this.addChildNode(slot.JTLayerFactory.LAYER_SORT_STOP_RENDER,e);var l=this.addChildNode(slot.JTLayerFactory.SCOLLER_GROUP_BLACK_BACK_GROUND,e),c=s.default.instance.elementMark,p=cc.instantiate(c);p.active=!0;var h=l.convertToNodeSpaceAR(c.parent.convertToWorldSpaceAR(c.getPosition()));p.parent=l,p.setPosition(h),l.active=!1,this.addChildNode(slot.JTLayerFactory.LINE_CONTAINER,e),this.addChildNode(slot.JTLayerFactory.LAYER_SORT_PLAY_RENDER,e),this.addChildNode(slot.JTLayerFactory.EFFECT_ABOVE_CONTAINER,e),n.launch(e)},t.prototype.updateLayer=function(){},t.prototype.registerClassAlias=function(){return this.registerClass(slot.JTLayerFactory.EFFECT_BELOW_CONTAINER,slot.JTGComponent),this.registerClass(slot.JTLayerFactory.SKIN_LOADER_CONTAINER,slot.JTGComponent),this.registerClass(slot.JTLayerFactory.SCROLLER_MASK_CONTAINER,slot.JTScrollerGroupMask),this.registerClass(slot.JTLayerFactory.SCROLLER_CONTAINER,slot.JTGComponent),this.registerClass(slot.JTLayerFactory.LAYER_SORT_STOP_RENDER,slot.JTLayerSortContainer),this.registerClass(t.WUDING_CONTAINER,slot.JTGComponent),this.registerClass(slot.JTLayerFactory.SCOLLER_GROUP_BLACK_BACK_GROUND,slot.JTBlackBackGround),this.registerClass(slot.JTLayerFactory.LINE_CONTAINER,slot.JTGComponent),this.registerClass(slot.JTLayerFactory.LAYER_SORT_PLAY_RENDER,slot.JTLayerSortContainer),this.registerClass(slot.JTLayerFactory.EFFECT_ABOVE_CONTAINER,slot.JTGComponent),this},t.WUDING_CONTAINER=1250,t}(slot.JTLayerFactory);n.default=a,cc._RF.pop()},{"../GameLayer111006001":"GameLayer111006001"}],JTPGScrollerGroup111006001:[function(e,t,n){"use strict";cc._RF.push(t,"338ads/9rtCab06JlAjqkxu","JTPGScrollerGroup111006001");var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.enableds=function(e){void 0===e&&(e=slot.SpinSlotView.STATE_OVER);for(var t=this._items.length,n=0;n<t;n++)for(var i=this._items[n],o=0;o<i.items.length;o++){var s=i.items[o];e==slot.SpinSlotView.STATE_OVER&&s.gotoAndStop(e)}},t}(slot.JTPGScrollerGroup);n.default=s,cc._RF.pop()},{}],JTSkinnableRuntimeLineAnimationRender60:[function(e,t,n){"use strict";cc._RF.push(t,"81677GKcfhAk75wrITeiMAk","JTSkinnableRuntimeLineAnimationRender60");var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var s=e("./LineAnimationManager60"),a=function(e){function t(){var t=e.call(this)||this;return t.aniLines=[],t}return o(t,e),t.prototype.createComplete=function(){var e=this.owner,t=slot.GData.getParameter("lineAniConfig");if(t){for(var n=e.scroller,i=n.config,o=new cc.Node,a=[],r=(n.isLandscape?e.landscapePoints:e.portraitPoints,e.lineId),l=t.linePoint[r].points,c=0;c<l.length;c++)if(l[c+1]){var p=l[c],h=l[c+1],u=h.x-p.x,d=h.y-p.y,m=slot.SlotUtils.toAngle(Math.atan2(d,u)),f=Math.ceil(Math.sqrt(Math.pow(u,2)+Math.pow(d,2))),y=(h.x+p.x)/2-.5*i.girdWidth,_=(h.y+p.y)/2-.5*i.girdHeight;a.push({x:y,y:_,angle:m,width:f,distanceX:u})}for(c=0;c<a.length;c++){var g=this.aniLines[c];if(g||(g=s.default.instance.createLineAni(),this.aniLines[c]=g),g.node.angle=a[c].angle,g.node.x=a[c].x,g.node.y=a[c].y,g.node.parent&&g.node.removeFromParent(),1!=c){o.addChild(g.node);var v=0,E=0;a[c].distanceX;var A="left";a.length>1&&0==c&&(A="left",v=.5,E=0),a.length>1&&c==a.length-1&&(A="right",v=1,E=.25),g.play(a[c].width,v,A,E)}else o.removeChild(g.node)}this._skinContainer=o,n.lineContainer.addChild(o)}},t.prototype.removeLines=function(){for(var e=0,t=this.aniLines;e<t.length;e++)t[e].node.removeFromParent()},t.prototype.show=function(){e.prototype.show.call(this),this.createComplete()},t.prototype.hide=function(){e.prototype.hide.call(this),this.removeLines();var t=this.owner.scroller;t.lineContainer&&t.lineContainer.removeChild(this._skinContainer)},t}(slot.JTRuntimeSkinnableLine);n.default=a,cc._RF.pop()},{"./LineAnimationManager60":"LineAnimationManager60"}],LanguageInfo111006001:[function(e,t,n){"use strict";cc._RF.push(t,"a7534kriytEJZ/5P6CpM60F","LanguageInfo111006001");var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,l=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},s([r],t)}(slot.LanguageInfoBase));n.default=l,cc._RF.pop()},{}],LineAnimation60:[function(e,t,n){"use strict";cc._RF.push(t,"18ad4ZwMTxDBqIEU0+3cuIA","LineAnimation60");var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,l=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lineConfigs=null,t.leftLine=null,t.rightLine=null,t.site="left",t}return o(t,e),t.prototype.onLoad=function(){},t.prototype.init=function(e){this.lineConfigs=e;for(var t=0;t<e.length;t++)e[t].width},t.prototype.play=function(e,t,n,i){var o,s=this;switch(this.site=n,this.site){case"left":o=this.leftLine;break;case"right":o=this.rightLine}o&&o.node.isValid&&(o.node.opacity=0,o.node.scaleX=e/o.node.width+.1,o.node.scaleY=1.1),this.scheduleOnce(function(){o&&o.node.isValid&&(o.node.active=!0,cc.tween(o.node).set({opacity:0}).to(.25,{opacity:255}).start())},i),this.scheduleOnce(function(){if(o&&o.node.isValid){o.node.active=!0,o.play("ani");var e=function(){o.off("finised",e,s)};o.on("finished",e,s)}},t)},t.prototype.setChildLine=function(e,t){var n=this.lineConfigs[e],i=new cc.Node;this.node.addChild(i),i.width=n.width;var o=i.addComponent(cc.Sprite);o.dstBlendFactor=cc.macro.BlendFactor.ONE;for(var s=i.addComponent(cc.Animation),a=[],r=0;r<n.spriteFrames.length;r++){var l=n.spriteFrames[r],c=t.getSpriteFrame(l);0==r&&(o.spriteFrame=c),a.push(c)}a.sort(function(e,t){return e.name.localeCompare(t.name,"zh-CN",{numeric:!0})});var p=cc.AnimationClip.createWithSpriteFrames(a,n.simple);switch(p.name="ani",p.speed=n.speed,s.addClip(p),p.wrapMode=cc.WrapMode.Normal,i.active=!1,n.site){case"left":this.leftLine=s;break;case"right":this.rightLine=s}},s([r],t)}(cc.Component));n.default=l,cc._RF.pop()},{}],LineAnimationManager60:[function(e,t,n){"use strict";cc._RF.push(t,"19ecdij/F9CVpPedW5FoN9X","LineAnimationManager60"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("./LineAnimation60"),o=function(){function e(){this.atlasList=[]}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.init=function(){var e=this;if(this._lineAniconfig=slot.GData.getParameter("lineAniConfig"),this._lineAniconfig)for(var t=this._lineAniconfig.animationAtlas,n=function(n){t[n];var i=n;game.ResLoader.getInstance().loadRes("textures/slotMachine/payline_light/zhongjianglianxian",cc.SpriteAtlas,function(t,n){e.loadAssetComplete(n,i)},slot.GData.bundleName)},i=0;i<t.length;i++)n(i)},e.prototype.loadAssetComplete=function(e,t){this.atlasList[t]=e},e.prototype.createLineAni=function(){var e=(new cc.Node).addComponent(i.default);e.init(this._lineAniconfig.animationAtlas);for(var t=0;t<this.atlasList.length;t++){var n=this.atlasList[t];e.setChildLine(t,n)}return e},e.prototype.dispose=function(){},e._instance=null,e}();n.default=o,cc._RF.pop()},{"./LineAnimation60":"LineAnimation60"}],Main111006001:[function(e,t,n){"use strict";cc._RF.push(t,"57d00zdnbpIl73C/PZZzTrK","Main111006001");var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./WinAniManager111006001"),r=cc._decorator,l=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.getWinAniManagerClass=function(){return a.default},s([l],t)}(slot.MainView));n.default=c,cc._RF.pop()},{"./WinAniManager111006001":"WinAniManager111006001"}],NumAtlasLabel111006001:[function(e,t,n){"use strict";cc._RF.push(t,"0452atpXL1HG41C7ZUyJq7w","NumAtlasLabel111006001");var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,l=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.onLoad=function(){},s([r],t)}(slot.CommonNumAtlasBase));n.default=l,cc._RF.pop()},{}],ParticleSpriteFramesRefresh:[function(e,t,n){"use strict";cc._RF.push(t,"a7263RsCwtHULA3uwnHF7iY","ParticleSpriteFramesRefresh");var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,l=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.atlas=null,t.aniFps=15,t.ps=null,t.index=0,t.count=0,t.spriteArray=[],t}return o(t,e),t.prototype.onLoad=function(){this.ps||(this.ps=this.node.getComponent(cc.ParticleSystem)),this.spriteArray=this.atlas.getSpriteFrames(),this.count=this.spriteArray.length,this.schedule(this.refreshSprite,1/this.aniFps,cc.macro.REPEAT_FOREVER)},t.prototype.refreshSprite=function(){this.index>=this.count&&(this.index=0),this.ps.spriteFrame=this.spriteArray[this.index],this.index++},s([l({type:cc.SpriteAtlas,tooltip:"\u56fe\u96c6\u8d44\u6e90"})],t.prototype,"atlas",void 0),s([l({type:cc.Integer,tooltip:"\u6bcf\u79d2\u66ff\u6362\u7c92\u5b50\u8d34\u56fe\u591a\u5c11\u6b21"})],t.prototype,"aniFps",void 0),s([r],t)}(cc.Component);n.default=c,cc._RF.pop()},{}],SpinSlotViewExtend111006001:[function(e,t,n){"use strict";cc._RF.push(t,"32be0vc0edONqUu4Uh58X3x","SpinSlotViewExtend111006001");var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var s=e("../GameEventName111006001"),a=function(e){function t(){var t=e.call(this)||this;return t.delayWinTween=null,t.delayWinTween2=null,t._slotFrameAniView=null,t._slotFrameAniViewSign="___SLOT_FRAME_ANI_VIEW_SIGN",t.isBlur=!0,t.isFade=!1,t.isFadeMask=!1,t.skinLoader.skeletonNode.scale=.698,t}return o(t,e),t.prototype.onPlayAnimation=function(e,t,n,i){var o=this;this.updateSkinPt(),this.delayWinTween2&&this.delayWinTween2.stop(),this.delayWinTween2=cc.tween(this).delay(1).call(function(){o.setAnimation(slot.JTGLoaderAssetType.Skeleton,"win_idle",!0)}).start(),this.setSkeletonAnimation("win",!1,function(){});var a=Math.floor(n/3);this.delayWinTween&&this.delayWinTween.stop(),this.delayWinTween=cc.tween(this).delay(.25*a).call(function(){o._showFrameAniView(i,n)}).start(),game.EventManager.getInstance().raiseEvent(s.EventName.GAME_EVENT_SHOW_LINE,!0,e.lineId)},t.prototype.addBordImageBg=function(){var e=slot.BaseSpinSlotView.winLabelNode.getComponent(cc.Sprite);e&&(e.sizeMode=cc.Sprite.SizeMode.TRIMMED)},t.prototype.playWinCoin=function(n,i,o){if(e.prototype.playWinCoin.call(this,n,i,o),!(n.winCoin<=0)){if(!t.winCoinBg){var s=new cc.Node("bordBg");s.scale=.7;var a=s.getComponent(cc.Sprite)||s.addComponent(cc.Sprite);t.winCoinBg=s;var r=slot.GData.getParameter("spinLineResultConfig")?slot.GData.getParameter("spinLineResultConfig").winCoinAtlas:null;t.coinBgoffset.y=r.y+3,game.ResLoader.getInstance().loadRes("textures/ui/gunzhouguanxiao",cc.SpriteAtlas,function(e,t){e||(a.spriteFrame=t.getSpriteFrame("mask"))},slot.GData.bundleName)}t.winCoinBg&&t.winCoinBg.parent&&t.winCoinBg.removeFromParent(),o.addEffect(t.winCoinBg,i,!0,t.coinBgoffset),t.winCoinBg.setSiblingIndex(0)}},t.prototype.onPlayIdleAnimaition=function(){},t.prototype.onPlayWildAnimation=function(t,n,i,o){e.prototype.onPlayWildAnimation&&e.prototype.onPlayWildAnimation.call(this,t,n,i,o)},t.prototype.onStopAnimation=function(){this.delayWinTween&&(this.delayWinTween.stop(),this.delayWinTween=null),this.delayWinTween2&&(this.delayWinTween2.stop(),this.delayWinTween2=null),this._recoverSlotFrameAniView(),game.EventManager.getInstance().raiseEvent(s.EventName.GAME_EVENT_SHOW_LINE,!1,0)},t.prototype.onPlayRewardsAnimation=function(e){e.winCoin<=0&&t.winCoinBg&&t.winCoinBg.parent&&t.winCoinBg.removeFromParent()},t.prototype.onStopRewardsAnimation=function(){t._rewardsView&&t._rewardsView.removeFromParent(),t.winCoinBg&&t.winCoinBg.removeFromParent(),this.delayWinTween&&(this.delayWinTween.stop(),this.delayWinTween=null),this.delayWinTween2&&(this.delayWinTween2.stop(),this.delayWinTween2=null),this._recoverSlotFrameAniView()},t.prototype._showFrameAniView=function(){this._slotFrameAniView||(this._slotFrameAniView=this._getSlotFrameAniView()),this._slotFrameAniView.active=!0,this.addEffectNode(this._slotFrameAniView,!1,5,0)},t.prototype._getSlotFrameAniView=function(){if(this._slotFrameAniView)return this._slotFrameAniView;this._slotFrameAniView=new cc.Node,this._slotFrameAniView.setScale(1.4,1.4);var e=this._slotFrameAniView.addComponent(slot.AnimationExtend),t=new slot.AniParam(slot.ANIMATION_TYPE.SKELETON,"skeleton/effect/yuansuzhongjiang","game_111006001","animation2");return e.init(t),e.play("animation2",!1,slot.Handler.create(this,function(){e.play("animation",!1,null)})),this._slotFrameAniView},t.prototype._recoverSlotFrameAniView=function(){this._slotFrameAniView&&(this._slotFrameAniView.removeFromParent(),this._slotFrameAniView.active=!1,this._slotFrameAniView=null)},t.prototype._getRewardsAnimation=function(){},t.prototype.updateSkinPt=function(){6==this.data?(this.skinLoader.skeletonNode.x=3,this.skinLoader.skeletonNode.y=4,this.skinLoader.spriteNode.x=0,this.skinLoader.spriteNode.y=-2):7==this.data?(this.skinLoader.skeletonNode.x=1,this.skinLoader.skeletonNode.y=-4,this.skinLoader.spriteNode.x=3,this.skinLoader.spriteNode.y=5):(this.skinLoader.spriteNode.x=0,this.skinLoader.spriteNode.y=0,this.skinLoader.skeletonNode.x=this.skinLoader.skeletonNode.y=0)},t.winCoinBg=null,t.coinBgoffset=cc.v2(0,0),t._rewardsView=null,t}(slot.SpinSlotView);n.default=a,cc._RF.pop()},{"../GameEventName111006001":"GameEventName111006001"}],Utils111006001:[function(e,t,n){"use strict";cc._RF.push(t,"475fbXLaTpE36bA+fm/Ivbk","Utils111006001"),Object.defineProperty(n,"__esModule",{value:!0}),n.Utils111006001=void 0;var i=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.playEffect=function(e,t,n,i,o,s){return console.warn("[INFO] playEffect: ",e),slot.SoundMger.instance.playEffect(e,t,n,i,o,s)},e._instance=null,e}();n.Utils111006001=i,cc._RF.pop()},{}],WinAniManager111006001:[function(e,t,n){"use strict";cc._RF.push(t,"ea9e0qiszFBnK2/JB/t6JPS","WinAniManager111006001");var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,l=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.winCoinLabel=null,t.touchLayer=null,t.aniLayer=null,t.winTextLayer=null,t.fluxayMaterial=null,t.animationMap=null,t.publicAniMap=null,t.winTextMap=null,t.winFontMap=null,t.callBack=null,t.winAniType=slot.WinAniType.Small,t.isLabelTween=!1,t.money=0,t._curMoney=0,t.coinLabelTween=null,t.winTextFadeInTeen=null,t.winTextFadeOutTeen=null,t.aniDataMap=null,t.customDataMap=null,t.winTextDataMap=null,t.touchEnabled=!1,t.musicVolume=0,t.step=0,t.stepList=[],t.endStopTime=5,t.clickHideTime=5,t.delayPlaySoundTween=null,t.soundType=2,t.winNumTweenAniStepTimes=[5,7,9],t.isKeepSameTagAni=!1,t.customLayer=null,t.maxRate=60,t.prePlayAnisTagArr=[],t.isPlayLastAni=!1,t}var n;return o(t,e),n=t,Object.defineProperty(t,"instance",{get:function(){return this._instance},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.animationMap=new slot.SDictionary,this.publicAniMap=new slot.SDictionary,this.winTextDataMap=new slot.SDictionary,this.touchLayer=this.node.getChildByName("touchLayer"),this.winTextLayer=this.node.getChildByName("winTextLayer"),this.aniLayer=this.node.getChildByName("aniLayer"),this.customLayer=this.node.getChildByName("customLayer"),this.winCoinLabel=this.node.getChildByName("coinLabel").getComponent(slot.CommonNumAtlasBase),this.fluxayMaterial=this.node.getChildByName("emptyNode").getComponent(cc.Sprite).getMaterial(0),this.touchLayer.on("touchstart",this.onTouch,this),cc.systemEvent.on("keydown",this.onKeyDown,this),this.loadResource(),this.node.active=!1,n._instance=this,e.prototype.resize.call(this)},t.prototype.onKeyDown=function(e){1==this.node.active&&e.keyCode==cc.macro.KEY.space&&this.onTouch(null)},t.prototype.addAniNodes=function(e,t,n){if(e)for(var i=0,o=e;i<o.length;i++){var s=o[i];s.bundle=slot.GData.bundleName,"sk"==s.type?this.loadSkeleton(s,t,n):"ps_clip"==s.type?this.loadParticleSystemClip(s,t,n):"ps"==s.type?this.loadParticleSystem(s,t,n):this.loadSpriteFrame(s,t,n)}},t.prototype.loadResource=function(){var e=this,t=slot.GData.getParameter("winAnimation");this.endStopTime=null!=t.endStopTime?t.endStopTime:5,this.clickHideTime=null!=t.clickHideTime?t.clickHideTime:5;var n=t.winAnis;if(t.winSoundType&&t.winSoundType.type&&(this.soundType=t.winSoundType.type||2),this.winTextMap=new slot.SDictionary,this.aniDataMap=new slot.SDictionary,this.winFontMap=new slot.SDictionary,this.customDataMap=new slot.SDictionary,n){var i=t.publicAnis;i&&this.addAniNodes(i,this.aniLayer,this.publicAniMap),t.customLayerIndex&&this.customLayer.setSiblingIndex(t.customLayerIndex),t.maxRate&&(this.maxRate=t.maxRate),t.winNumTweenAniStepTimes&&(this.winNumTweenAniStepTimes=t.winNumTweenAniStepTimes),t.isKeepSameTagAni&&(this.isKeepSameTagAni=t.isKeepSameTagAni);var o=function(t){var i,o,a=n[t];switch(s.addAniNodes(a.bgAnis,s.aniLayer,s.animationMap),t){case"bigWin":i=slot.WinAniType.Small;break;case"superWin":i=slot.WinAniType.Middle;break;case"megaWin":i=slot.WinAniType.Great}a.textImage&&(a.textImage.atlas?(o=(o=a.textImage.atlas).replace("&",slot.GData.curLanguage),game.ResLoader.getInstance().loadRes(o,cc.SpriteAtlas,function(n,o){if(!n){var s=new cc.Node;s.active=!1,s.x=a.textImage.x,s.y=a.textImage.y,s.name=t;var r=s.addComponent(cc.Sprite);a.textImage.isFluxay&&(r.setMaterial(0,e.fluxayMaterial),s.addComponent(slot.FluxayTexture)),r.spriteFrame=o.getSpriteFrame(a.textImage.spriteFrame),s.scale=a.textImage.scale?a.textImage.scale:1,e.winTextMap.set(i,s);var l={x:s.x,y:s.y,scale:s.scale};e.winTextDataMap.set(i,l),e.winTextLayer.addChild(s),e.winTextLayer.zIndex=a.textImage.zIndex||10}},slot.GData.bundleName)):(o=(o=a.textImage.spriteFrame).replace("&",slot.GData.curLanguage),game.ResLoader.getInstance().loadRes(o,cc.SpriteFrame,function(n,o){if(!n){var s=new cc.Node;s.active=!1,s.x=a.textImage.x,s.y=a.textImage.y,s.name=t,s.scale=a.textImage.scale?a.textImage.scale:1;var r=s.addComponent(cc.Sprite);a.textImage.isFluxay&&(r.setMaterial(0,e.fluxayMaterial),s.addComponent(slot.FluxayTexture)),r.spriteFrame=o,e.winTextMap.set(i,s);var l={x:s.x,y:s.y,scale:s.scale};e.winTextDataMap.set(i,l),e.winTextLayer.addChild(s),e.winTextLayer.zIndex=a.textImage.zIndex||10}},slot.GData.bundleName)));var r=a.customAnis;r&&(s.addAniNodes(r,s.customLayer,s.animationMap),s.customDataMap.set(i,r));var l=n[t].bgAnis;l&&s.aniDataMap.set(i,l)},s=this;for(var a in n)o(a);var r=t.bigWinNumAtlas,l={config:r};this.winFontMap.set(slot.WinAniType.Small,l),game.ResLoader.getInstance().loadRes(r.atlas,cc.SpriteAtlas,function(t,n){if(!t){var i=e.winFontMap.get(slot.WinAniType.Small);i.atlasElment=e.generateAtlasElment(r,n),e.winCoinLabel.AtlsElment=[].concat(i.atlasElment)}},slot.GData.bundleName);var c=t.superWinNumAtlas,p={config:c};this.winFontMap.set(slot.WinAniType.Middle,p),game.ResLoader.getInstance().loadRes(c.atlas,cc.SpriteAtlas,function(t,n){t||(e.winFontMap.get(slot.WinAniType.Middle).atlasElment=e.generateAtlasElment(c,n))},slot.GData.bundleName);var h=t.megaWinNumAtlas,u={config:h};this.winFontMap.set(slot.WinAniType.Great,u),game.ResLoader.getInstance().loadRes(h.atlas,cc.SpriteAtlas,function(t,n){t||(e.winFontMap.get(slot.WinAniType.Great).atlasElment=e.generateAtlasElment(h,n))},slot.GData.bundleName)}},t.prototype.generateAtlasElment=function(e,t){for(var n=[],i=0,o=e.config;i<o.length;i++){var s=o[i],a=new slot.AtlsElmentConfig;a.id=""+s.id,a.elmentSpriteFrame=t.getSpriteFrame(s.spriteFrameName),n.push(a)}return n},t.prototype.loadSkeleton=function(e,t,n){if(e){var i=new cc.Node;i.name=e.tag,t||(t=this.aniLayer),t.addChild(i);var o=i.addComponent(slot.AnimationExtend),s=e.startAniName,a=new slot.AniParam(slot.ANIMATION_TYPE.SKELETON,e.skUrl,e.bundle,s),r=!1;null!=e.premultipliedAlpha&&null!=e.premultipliedAlpha&&(r=e.premultipliedAlpha),o.init(a,r),o.node.active=!1,this.setLoad(e,o);var l=e.tag;n||(n=this.animationMap),n.set(l,o)}},t.prototype.loadSpriteFrame=function(e,t,n){if(e){var i=new cc.Node;i.name=e.tag,t||(t=this.aniLayer),t.addChild(i);var o=i.addComponent(slot.AnimationExtend),s=e.startAniName,a=e.loopAniName,r=new slot.AniParam(slot.ANIMATION_TYPE.SPRITE_FRAMES_CLIP,e.startSpriteFramesUrl,e.bundle,s,e.startClipSimple);o.init(r),o.node.active=!1,this.setLoad(e,o),o.addClip(e.loopSpriteFramesUrl,e.bundle,a,e.loopClipSimple);var l=e.tag;n||(n=this.animationMap),n.set(l,o)}},t.prototype.loadParticleSystemClip=function(e,t,n){var i=this;if(e){var o=e.psUrl,s=e.asUrl;game.ResLoader.getInstance().loadRes(o,cc.ParticleAsset,function(o,a){if(o)console.log(o);else{var r=new cc.Node;r.name=e.tag;var l=r.addComponent(cc.ParticleSystem);l.file=a,game.ResLoader.getInstance().loadRes(s,cc.SpriteAtlas,function(e,t){l.addComponent(slot.ParticleSystemSpriteFramesRefresh).atlas=t},slot.GData.bundleName),t||(t=i.aniLayer),t.addChild(r),r.active=!1,i.setLoadParticle(e,r);var c=e.tag;n||(n=i.animationMap),n.set(c,l)}},slot.GData.bundleName)}},t.prototype.loadParticleSystem=function(e,t,n){var i=this;if(e){var o=e.psUrl,s=e.spUrl;game.ResLoader.getInstance().loadRes(o,cc.ParticleAsset,function(o,a){if(o)console.log(o);else{var r=new cc.Node;r.name=e.tag;var l=r.addComponent(cc.ParticleSystem);l.file=a,game.ResLoader.getInstance().loadRes(s,cc.SpriteFrame,function(e,t){if(e)return e;l.spriteFrame=t},slot.GData.bundleName),t||(t=i.aniLayer),t.addChild(r),r.active=!1,i.setLoadParticle(e,r);var c=e.tag;n||(n=i.animationMap),n.set(c,l)}},slot.GData.bundleName)}},t.prototype.setLoad=function(e,t){var n=t.node,i=e;i&&(n.x=i.x||0,n.y=i.y||0,n.setScale(i.scale||1),n.zIndex=i.zIndex||0)},t.prototype.setLoadParticle=function(e,t){var n=t,i=e;i&&(n.x=i.x||0,n.y=i.y||0,n.setScale(i.scale||1),n.zIndex=i.zIndex||0)},t.prototype.playPublicAni=function(){var e=slot.GData.getParameter("winAnimation").publicAnis;if(e)for(var t=function(e){var t=n.publicAniMap.get(e.tag);t=t;var i=e.loopAniName,o=e.startAniName,s=slot.Handler.create(n,function(){t.play(i,!0)});t.node.active=!0,t.play(o,!1,s)},n=this,i=0,o=e;i<o.length;i++)t(o[i])},t.prototype.playAnimation=function(e,t,n){var i=this,o=this.aniDataMap.get(e);o||(o=this.customDataMap.get(e));var s=t;if(o)for(var a=function(e){var o=r.animationMap.get(e.tag),a=!1;if(r.isKeepSameTagAni&&(r.prePlayAnisTagArr.includes(e.tag)?a=!0:r.prePlayAnisTagArr.push(e.tag)),"ps_clip"==e.type)o.node.active=!0,a||o.getComponent(cc.ParticleSystem).resetSystem();else if("ps"==e.type)o.getComponent(cc.ParticleSystem).custom=!0,o.node.active=!0,a||o.getComponent(cc.ParticleSystem).resetSystem();else{o=o;var l=e.loopAniName,c=e.startAniName,p=t?l:c;a&&(s=!0);var h=s?null:slot.Handler.create(r,function(){l?o.play(l,!0):i.scheduleOnce(function(){o.hide(),o.node.active=!1},i.endStopTime),n&&(n.run(),n=null)});o.node.active=!0,o.play(p,s,h)}},r=this,l=0,c=o;l<c.length;l++)a(c[l])},t.prototype.playWinText=function(e,t){void 0===t&&(t=!1);var n=this.winTextMap.get(e);if(n){n.active=!0;var i=this.winTextDataMap.get(e);n.scale=i.scale,n.x=i.x,n.y=i.y,t||(this.winTextFadeInTeen=this.playWinTextFadeIn(n,e))}},t.prototype.playAniSound=function(e,t){var n=this;if(1==this.soundType)slot.SoundMger.instance.pauseCurMusic(),slot.SoundMger.instance.playMusic(slot.SOUND_NAME.Prize_All,!0,null,null,!1);else{switch(this.delayPlaySoundTween&&(this.delayPlaySoundTween.stop(),this.delayPlaySoundTween=null),slot.SoundMger.instance.stopEffect(this.curWinTextSoundName),slot.SoundMger.instance.stopEffect(this.curWinCoinSoundName),slot.SoundMger.instance.stopEffect(this.curWinNumSoundName),e){case slot.WinAniType.Small:this.curWinTextSoundName=slot.SOUND_NAME.Prize_Big_Text,this.curWinCoinSoundName=slot.SOUND_NAME.Prize_Big_Coin,this.curWinNumSoundName=slot.SOUND_NAME.Prize_Big_Number;break;case slot.WinAniType.Middle:this.curWinTextSoundName=slot.SOUND_NAME.Prize_Super_Text,this.curWinCoinSoundName=slot.SOUND_NAME.Prize_Super_Coin,this.curWinNumSoundName=slot.SOUND_NAME.Prize_Super_Number;break;case slot.WinAniType.Great:this.curWinTextSoundName=slot.SOUND_NAME.Prize_Mega_Text,this.curWinCoinSoundName=slot.SOUND_NAME.Prize_Mega_Coin,this.curWinNumSoundName=slot.SOUND_NAME.Prize_Mega_Number}!0===t?slot.SoundMger.instance.playEffect(this.curWinNumSoundName,!0):!1===t?slot.SoundMger.instance.playEffect(this.curWinTextSoundName):(slot.SoundMger.instance.playEffect(this.curWinTextSoundName),this.delayPlaySoundTween=cc.tween(this).delay(2).call(function(){slot.SoundMger.instance.playEffect(n.curWinNumSoundName,!0)}).start())}},t.prototype.onTouch=function(){if(this.touchEnabled)return this.isLabelTween&&!this.isPlayLastAni?(slot.SoundMger.instance.playEffect(slot.SOUND_NAME.Prize_All_Stop),void this.playFinalAnimation()):void this.fadeOut()},Object.defineProperty(t.prototype,"curMoney",{get:function(){return this._curMoney},set:function(e){this._curMoney=e,this.winCoinLabel.node.active=e>0,this.updateCoinLabel(slot.SlotUtils.formatNumber(e))},enumerable:!1,configurable:!0}),t.prototype.playWinAni=function(e,t,n,i){var o=this;void 0===i&&(i=255),this.prePlayAnisTagArr.length=0,this.hideAllAniNode(),this.hideAllWinText(),this.hideAllcustomAniNode(),this.isPlayLastAni=!1,this.musicVolume=game.SoundManager.getInstance().getMusicVolume(),this.scheduleOnce(function(){o.touchEnabled=!0},.5),slot.SoundMger.instance.pauseCurMusic(),this.winAniType=e,this.callBack=n,this.money=t,this.node.active=!0,this.isLabelTween=!0,this.curMoney=0,this.node.opacity=i;var s=slot.GData.getParameter("winAnimation");if(s.winBlack){var a=s.winBlack.opacity||0;this.node.getChildByName("black").opacity=a}this.playWinStart(),this.playPublicAni();var r=slot.SlotConfigManager.instance.getWinAnimationCondition(1),l=slot.SlotConfigManager.instance.getWinAnimationCondition(2),c=slot.SlotConfigManager.instance.getWinAnimationCondition(3);this.playAnimation(slot.WinAniType.Small,!1),this.playWinText(slot.WinAniType.Small),this.playAniSound(slot.WinAniType.Small),this.changeWinFont(slot.WinAniType.Small),this.stepList=[slot.SpinManager.instance.betCost*c,slot.SpinManager.instance.betCost*l,slot.SpinManager.instance.betCost*r],this.step=0,this.isLabelTween=!0,this.touchEnabled=!1,this.updateWinCoinByTween();var p=this.node.getChildByName("black");cc.tween(p).set({opacity:0}).to(.5,{opacity:180}).start()},t.prototype.hideAllAniNode=function(){if(this.aniLayer)for(var e=0,t=this.aniLayer.children;e<t.length;e++)t[e].active=!1},t.prototype.hideAllWinText=function(){if(this.winTextLayer)for(var e=0,t=this.winTextLayer.children;e<t.length;e++)t[e].active=!1},t.prototype.hideAllcustomAniNode=function(){if(this.customLayer)for(var e=0,t=this.customLayer.children;e<t.length;e++)t[e].active=!1},t.prototype.updateWinCoinByTween=function(){if(this.coinLabelTween&&(this.coinLabelTween.stop(),this.coinLabelTween=null),this.winAniType>=this.step+2&&this.prizeStepChange(),this.step<this.stepList.length&&this.curMoney<this.money){var e=this.step+1;e=e>this.stepList.length-1?this.stepList.length-1:e;var t=this.stepList[e],n=this.winNumTweenAniStepTimes[this.step]||6;if((this.step==this.stepList.length-1||t>=this.money)&&(t=this.money),t>this.money)if(e==this.step){if(this.money==this.stepList[e])n=0;else if(this.money>this.stepList[e]){var i=slot.SpinManager.instance.betCost*this.maxRate;(i=i>this.stepList[e]?i:1.7*this.stepList[e])>t&&(n=(t-this.stepList[e])/((i-this.stepList[e])/n))}}else n=(t-this.stepList[this.step])/((this.stepList[e]-this.stepList[this.step])/n);this.playNumTweenAni(this.winCoinLabel.node,this.curMoney,t,n)}else this.isLabelTween=!1,this.numberTweenComplete(),this.onCoinIncreaseEnd()},t.prototype.playNumTweenAni=function(e,t,n,i){var o=this;e&&(this.coinLabelTween=cc.tween({num:t}).set({num:t}).to(i,{num:n},{progress:function(e,t,n,i){var s=e+(t-e)*i;return o.curMoney=s,s}}).call(function(){o.curMoney=n,o.step++,o.updateWinCoinByTween()}).start())},t.prototype.prizeStepChange=function(){var e=this;switch(this.step>0&&this.hideAllWinText(),this.step){case 1:game.EventManager.getInstance().raiseEvent(slot.GameEventNames.EVENT_CHANGE_WIN_TYPE,slot.WinAniType.Middle),this.hideAniAndText(slot.WinAniType.Small),this.playAnimation(slot.WinAniType.Middle,!1),this.playAniSound(slot.WinAniType.Middle),this.changeWinFont(slot.WinAniType.Middle),this.playWinText(slot.WinAniType.Middle);break;case 2:game.EventManager.getInstance().raiseEvent(slot.GameEventNames.EVENT_CHANGE_WIN_TYPE,slot.WinAniType.Great),this.hideAniAndText(slot.WinAniType.Middle),this.playAnimation(slot.WinAniType.Great,!1),this.playAniSound(slot.WinAniType.Great),this.changeWinFont(slot.WinAniType.Great),this.scheduleOnce(function(){slot.SoundMger.instance.stopEffect(e.curWinTextSoundName)},4),this.playWinText(slot.WinAniType.Great)}},t.prototype.numberTweenComplete=function(){var e=this;this.delayPlaySoundTween&&(this.delayPlaySoundTween.stop(),this.delayPlaySoundTween=null),1==this.soundType?(slot.SoundMger.instance.stopMusic(slot.SOUND_NAME.Prize_All),slot.SoundMger.instance.resumeCurMusic()):(slot.SoundMger.instance.stopEffect(this.curWinTextSoundName),slot.SoundMger.instance.stopEffect(this.curWinCoinSoundName),slot.SoundMger.instance.stopEffect(this.curWinNumSoundName)),slot.SoundMger.instance.playEffect(slot.SOUND_NAME.Prize_All_Stop),this.touchEnabled=!0,this.isPlayLastAni=!0,this.scheduleOnce(function(){e.fadeOut()},this.endStopTime)},t.prototype.changeWinFont=function(e){var t,n,i=this.winFontMap.get(e);this.winCoinLabel.offScale=i.config.scale||1,this.winCoinLabel.node.x=i.config.x||0,this.winCoinLabel.node.y=i.config.y||0,this.winCoinLabel.spaceX=i.config.spaceX||0,this.winCoinLabel.shrink=null===(t=i.config.shrink)||void 0===t||t,this.winCoinLabel.maxWidth=i.config.maxWidth||600,this.winCoinLabel.anchorY=null!==(n=i.config.anchorY)&&void 0!==n?n:1,this.winCoinLabel.AtlsElment=[].concat(i.atlasElment)},t.prototype.playFinalAnimation=function(){var e=this;this.isPlayLastAni=!0,this.delayPlaySoundTween&&(this.delayPlaySoundTween.stop(),this.delayPlaySoundTween=null),1==this.soundType?(slot.SoundMger.instance.stopMusic(slot.SOUND_NAME.Prize_All),slot.SoundMger.instance.resumeCurMusic()):(slot.SoundMger.instance.stopEffect(this.curWinTextSoundName),slot.SoundMger.instance.stopEffect(this.curWinCoinSoundName),slot.SoundMger.instance.stopEffect(this.curWinNumSoundName)),this.hideAniAndText(),this.hideAllcustomAniNode(),this.winTextFadeInTeen&&(this.winTextFadeInTeen.stop(),this.winTextFadeInTeen=null),this.winTextFadeOutTeen&&(this.winTextFadeOutTeen.stop(),this.winTextFadeOutTeen=null),this.winCoinLabel.node.active=!0,this.unscheduleAllCallbacks(),this.playAnimation(this.winAniType,!0),this.changeWinFont(this.winAniType),this.playWinText(this.winAniType,!0),this.coinLabelTween&&(this.coinLabelTween.stop(),this.coinLabelTween=null),this.touchEnabled=!1,this.isLabelTween=!1,this.curMoney=this.money,this.scheduleOnce(function(){e.touchEnabled=!0},.5),this.scheduleOnce(function(){e.fadeOut()},this.clickHideTime),this.onPlayFinalAnimation()},t.prototype.hideAniAndText=function(e){if(void 0!==e){var t=this.aniDataMap.get(e);if(t||(t=this.customDataMap.get(e)),!t)return;for(var n=0,i=t;n<i.length;n++){var o=i[n];this.animationMap.get(o.tag).node.active=!1,(r=this.winTextMap.get(e))&&(this.winTextFadeOutTeen=this.playWinTextFadeOut(r,e))}}else{for(var s=0,a=this.aniLayer.children;s<a.length;s++){var r=a[s];this.animationMap.get(r.name)&&(r.active=!1)}for(var l=0,c=this.winTextLayer.children;l<c.length;l++)(r=c[l]).active=!1}},t.prototype.fadeOut=function(){this.touchEnabled=!1,this.coinLabelTween&&(this.coinLabelTween.stop(),this.coinLabelTween=null),this.playFadeOut(slot.Handler.create(this,this.hide))},t.prototype.hide=function(){if(1==this.soundType?(slot.SoundMger.instance.stopMusic(slot.SOUND_NAME.Prize_All),slot.SoundMger.instance.stopEffect(slot.SOUND_NAME.Prize_All_Stop)):(slot.SoundMger.instance.stopEffect(this.curWinTextSoundName),slot.SoundMger.instance.stopEffect(this.curWinCoinSoundName),slot.SoundMger.instance.stopEffect(this.curWinNumSoundName),slot.SoundMger.instance.stopEffect(slot.SOUND_NAME.Prize_Stop)),slot.SoundMger.instance.resumeCurMusic(),this.hideAniAndText(),this.hideAllcustomAniNode(),this.unscheduleAllCallbacks(),this.prePlayAnisTagArr.length=0,game.EventManager.getInstance().raiseEvent(slot.GameEventNames.EVENT_UPDATE_WIN_ANI_END),this.node.active=!1,this.callBack){var e=this.callBack;this.callBack=null,e.run()}},t.prototype.playWinStart=function(){},t.prototype.updateCoinLabel=function(e){this.winCoinLabel.string=e},t.prototype.playWinTextFadeOut=function(e){e.active=!1},t.prototype.onStageChange=function(){},t.prototype.onPlayFinalAnimation=function(){},t.prototype.onCoinIncreaseEnd=function(){this.playAnimationWithExcept(this.winAniType,!1,"win_fx");var e=this.winCoinLabel.node.scale;cc.tween(this.winCoinLabel.node).to(.2,{scale:e+.1}).to(.15,{scale:e}).start();var t=this.winTextMap.get(this.winAniType),n=t.scale;cc.tween(t).to(.2,{scale:n+.1}).to(.15,{scale:n}).start()},t.prototype.playAnimationWithExcept=function(e,t,n,i){var o=this,s=this.aniDataMap.get(e);s||(s=this.customDataMap.get(e));var a=t;if(s)for(var r=new RegExp(n),l=function(e){if(r.test(e.tag))return"continue";var n=c.animationMap.get(e.tag),s=!1;if(c.isKeepSameTagAni&&(c.prePlayAnisTagArr.includes(e.tag)?s=!0:c.prePlayAnisTagArr.push(e.tag)),"ps_clip"==e.type)n.node.active=!0,s||n.getComponent(cc.ParticleSystem).resetSystem();else if("ps"==e.type)n.getComponent(cc.ParticleSystem).custom=!0,n.node.active=!0,s||n.getComponent(cc.ParticleSystem).resetSystem();else{n=n;var l=e.loopAniName,p=e.startAniName,h=t?l:p;s&&(a=!0);var u=a?null:slot.Handler.create(c,function(){l?n.play(l,!0):o.scheduleOnce(function(){n.hide(),n.node.active=!1},o.endStopTime),i&&(i.run(),i=null)});n.node.active=!0,n.play(h,a,u)}},c=this,p=0,h=s;p<h.length;p++)l(h[p])},t.prototype.playFadeOut=function(e){e.run()},t.prototype.getWinTextNode=function(){return this.winTextMap.get(this.winAniType)},t.prototype.getCustomLayerNode=function(){return this.customLayer},t.prototype.playWinTextFadeIn=function(e){var t=this.winCoinLabel.node.scale;cc.tween(this.winCoinLabel.node).to(.2,{scale:t+.1}).to(.15,{scale:t}).start();var n=e.scale,i=e.y;return cc.tween(e).set({scale:.2,y:i-90}).to(.2,{scale:n+.1,y:i}).to(.15,{scale:n}).start()},s([l(slot.CommonNumAtlasBase)],t.prototype,"winCoinLabel",void 0),s([l(cc.Node)],t.prototype,"touchLayer",void 0),s([l(cc.Node)],t.prototype,"aniLayer",void 0),s([l(cc.Node)],t.prototype,"winTextLayer",void 0),s([l(cc.Material)],t.prototype,"fluxayMaterial",void 0),n=s([r],t)}(slot.BaseView);n.default=c,cc._RF.pop()},{}]},{},["GameEventName111006001","NumAtlasLabel111006001","ParticleSpriteFramesRefresh","Utils111006001","GameBg111006001","LanguageInfo111006001","Main111006001","WinAniManager111006001","Adaptive111006001","Banner111006001","GameLayer111006001","JTPGScrollerGroup111006001","SpinSlotViewExtend111006001","GameLogic111006001","JTChildManager111006001","JTContrlAni111006001","JTContrlMouseAni111006001","JTContrlWildAni111006001","JTLayerManager111006001","JTSkinnableRuntimeLineAnimationRender60","LineAnimation60","LineAnimationManager60"]);